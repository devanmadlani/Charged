import{a as Dn}from"./chunk-Z7KG2CFB.js";import{C as Cn,d as Rn,na as An,o as he,r as En,s as ge,sa as _n,ta as ot,wa as at}from"./chunk-A75ZAIYH.js";import{e as y,g as Jr,i as Oe}from"./chunk-CVT7ZQ5I.js";var On=y(ve=>{"use strict";var oe=ve&&ve.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},ae=ve&&ve.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(ve,"__esModule",{value:!0});ve.defaultWindowHandlerImplementation=void 0;function A(){if(typeof window>"u")throw Error("If you are using this package with server-side rendering, please make sure that you are checking if the window object is defined.");return window}var Qr={key:function(t){return oe(this,void 0,void 0,function(){return ae(this,function(r){return[2,A().localStorage.key(t)]})})},clear:function(){return oe(this,void 0,void 0,function(){return ae(this,function(t){return[2,A().localStorage.clear()]})})},getItem:function(t){return oe(this,void 0,void 0,function(){return ae(this,function(r){return[2,A().localStorage.getItem(t)]})})},removeItem:function(t){return oe(this,void 0,void 0,function(){return ae(this,function(r){return[2,A().localStorage.removeItem(t)]})})},setItem:function(t,r){return oe(this,void 0,void 0,function(){return ae(this,function(e){return[2,A().localStorage.setItem(t,r)]})})},keySync:function(t){return A().localStorage.key(t)},clearSync:function(){return A().localStorage.clear()},getItemSync:function(t){return A().localStorage.getItem(t)},removeItemSync:function(t){return A().localStorage.removeItem(t)},setItemSync:function(t,r){return A().localStorage.setItem(t,r)}},$r={key:function(t){return oe(this,void 0,void 0,function(){return ae(this,function(r){return[2,A().sessionStorage.key(t)]})})},clear:function(){return oe(this,void 0,void 0,function(){return ae(this,function(t){return[2,A().sessionStorage.clear()]})})},getItem:function(t){return oe(this,void 0,void 0,function(){return ae(this,function(r){return[2,A().sessionStorage.getItem(t)]})})},removeItem:function(t){return oe(this,void 0,void 0,function(){return ae(this,function(r){return[2,A().sessionStorage.removeItem(t)]})})},setItem:function(t,r){return oe(this,void 0,void 0,function(){return ae(this,function(e){return[2,A().sessionStorage.setItem(t,r)]})})},keySync:function(t){return A().sessionStorage.key(t)},clearSync:function(){return A().sessionStorage.clear()},getItemSync:function(t){return A().sessionStorage.getItem(t)},removeItemSync:function(t){return A().sessionStorage.removeItem(t)},setItemSync:function(t,r){return A().sessionStorage.setItem(t,r)}};ve.defaultWindowHandlerImplementation={history:{replaceState:function(t,r,e){return A().history.replaceState(t,r,e)},getState:function(){return A().history.state}},location:{getHref:function(){return A().location.href},setHref:function(t){A().location.href=t},getSearch:function(){return A().location.search},getHash:function(){return A().location.hash},getPathName:function(){return A().location.pathname},assign:function(t){A().location.assign(t)},getHostName:function(){return A().location.hostname},getHost:function(){return A().location.host},getOrigin:function(){return A().location.origin}},getDocument:function(){return A().document},getWindowUnsafe:function(){return A().window},localStorage:Qr,sessionStorage:$r}});var ce=y(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.WindowHandlerReference=void 0;var Zr=On(),Mn=function(){function t(r){var e=function(s){return s};r!==void 0&&(e=r),this.windowHandler=e(Zr.defaultWindowHandlerImplementation)}return t.init=function(r){t.instance===void 0&&(t.instance=new t(r))},t.getReferenceOrThrow=function(){if(t.instance===void 0)throw new Error("SuperTokensWindowHandler must be initialized before calling this method.");return t.instance},t}();Ve.WindowHandlerReference=Mn;Ve.default=Mn});var Pn=y(ut=>{"use strict";function es(t){for(var r in t)ut.hasOwnProperty(r)||(ut[r]=t[r])}ut.__esModule=!0;es(ce())});var Nn=y(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.WindowHandlerReference=void 0;var ts=Pn();Object.defineProperty(ct,"WindowHandlerReference",{enumerable:!0,get:function(){return ts.WindowHandlerReference}})});var Ln=y(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.SSR_ERROR=Me.DEFAULT_API_BASE_PATH=void 0;Me.DEFAULT_API_BASE_PATH="/auth";Me.SSR_ERROR=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`});var Hn=y(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});var ns=function(){function t(r){var e=this;this.getAsStringDangerous=function(){return e.value},this.value=xn(r)}return t}();Ft.default=ns;function xn(t,r){r===void 0&&(r=!1);function e(i){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(i)}t=t.trim();try{if(!t.startsWith("http://")&&!t.startsWith("https://"))throw new Error("Error converting to proper URL");var s=new URL(t);return r?s.hostname.startsWith("localhost")||e(s.hostname)?t="http://"+s.host:t="https://"+s.host:t=s.protocol+"//"+s.host,t}catch{}if(t.startsWith("/"))throw new Error("Please provide a valid domain name");if(t.indexOf(".")===0&&(t=t.substr(1)),(t.indexOf(".")!==-1||t.startsWith("localhost"))&&!t.startsWith("http://")&&!t.startsWith("https://")){t="https://"+t;try{return new URL(t),xn(t,!0)}catch{}}throw new Error("Please provide a valid domain name")}});var Fn=y(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});var rs=function(){function t(r){var e=this;this.startsWith=function(s){return e.value.startsWith(s.value)},this.appendPath=function(s){return new t(e.value+s.value)},this.getAsStringDangerous=function(){return e.value},this.value=Ut(r)}return t}();qt.default=rs;function Ut(t){t=t.trim();try{if(!t.startsWith("http://")&&!t.startsWith("https://"))throw new Error("Error converting to proper URL");var r=new URL(t);return t=r.pathname,t.charAt(t.length-1)==="/"?t.substr(0,t.length-1):t}catch{}if((ss(t)||t.startsWith("localhost"))&&!t.startsWith("http://")&&!t.startsWith("https://"))return t="http://"+t,Ut(t);t.charAt(0)!=="/"&&(t="/"+t);try{return new URL("http://example.com"+t),Ut("http://example.com"+t)}catch{throw new Error("Please provide a valid URL path")}}function ss(t){if(t.indexOf(".")===-1||t.startsWith("/"))return!1;try{var r=new URL(t);return r.hostname.indexOf(".")!==-1}catch{}try{var r=new URL("http://"+t);return r.hostname.indexOf(".")!==-1}catch{}return!1}});var Vn=y(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.isAnIpAddress=void 0;function Un(t){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)}je.isAnIpAddress=Un;var is=function(){function t(r){var e=this;this.getAsStringDangerous=function(){return e.value},this.value=qn(r)}return t}();je.default=is;function qn(t,r){r===void 0&&(r=!1),t=t.trim();try{if(!t.startsWith("http://")&&!t.startsWith("https://"))throw new Error("converting to proper URL");var e=new URL(t);return r?e.hostname.startsWith("localhost")||Un(e.hostname)?t="http://"+e.host:t="https://"+e.host:t=e.protocol+"//"+e.host,t}catch{}if(t.startsWith("/"))throw new Error("Please provide a valid domain name");if(t.indexOf(".")===0&&(t=t.substr(1)),(t.indexOf(".")!==-1||t.startsWith("localhost"))&&!t.startsWith("http://")&&!t.startsWith("https://")){t="https://"+t;try{return new URL(t),qn(t,!0)}catch{}}throw new Error("Please provide a valid domain name")}});var jn=y(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});var os=function(){function t(r){var e=this;this.startsWith=function(s){return e.value.startsWith(s.value)},this.appendPath=function(s){return new t(e.value+s.value)},this.getAsStringDangerous=function(){return e.value},this.value=Vt(r)}return t}();jt.default=os;function Vt(t){t=t.trim();try{if(!t.startsWith("http://")&&!t.startsWith("https://"))throw new Error("converting to proper URL");var r=new URL(t);return t=r.pathname,t.charAt(t.length-1)==="/"?t.substr(0,t.length-1):t}catch{}if((as(t)||t.startsWith("localhost"))&&!t.startsWith("http://")&&!t.startsWith("https://"))return t="http://"+t,Vt(t);t.charAt(0)!=="/"&&(t="/"+t);try{return new URL("http://example.com"+t),Vt("http://example.com"+t)}catch{throw new Error("Please provide a valid URL path")}}function as(t){if(t.indexOf(".")===-1||t.startsWith("/"))return!1;try{var r=new URL(t);return r.hostname.indexOf(".")!==-1}catch{}try{var r=new URL("http://"+t);return r.hostname.indexOf(".")!==-1}catch{}return!1}});var lt=y(B=>{"use strict";var Bt=B&&B.__assign||function(){return Bt=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Bt.apply(this,arguments)},Bn=B&&B.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},Gn=B&&B.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(B,"__esModule",{value:!0});B.matchesDomainOrSubdomain=B.getNormalisedUserContext=B.validateAndNormaliseInputOrThrowError=B.normaliseSessionScopeOrThrowError=B.normaliseURLPathOrThrowError=B.normaliseURLDomainOrThrowError=void 0;var Wn=Vn(),us=jn(),cs=ce();function Xn(t){var r=new Wn.default(t).getAsStringDangerous();return r}B.normaliseURLDomainOrThrowError=Xn;function Gt(t){return new us.default(t).getAsStringDangerous()}B.normaliseURLPathOrThrowError=Gt;function Wt(t){function r(s){s=s.trim().toLowerCase(),s.startsWith(".")&&(s=s.substr(1)),!s.startsWith("http://")&&!s.startsWith("https://")&&(s="http://"+s);try{var i=new URL(s);return s=i.hostname,s}catch{throw new Error("Please provide a valid sessionScope")}}var e=r(t);return e==="localhost"||(0,Wn.isAnIpAddress)(e)?e:t.startsWith(".")?"."+e:e}B.normaliseSessionScopeOrThrowError=Wt;function ls(t){var r=this,e=Xn(t.apiDomain),s=Gt("/auth");t.apiBasePath!==void 0&&(s=Gt(t.apiBasePath));var i=cs.default.getReferenceOrThrow().windowHandler.location.getHostName(),n=Wt(t!==void 0&&t.sessionTokenFrontendDomain!==void 0?t.sessionTokenFrontendDomain:i),a=401;t.sessionExpiredStatusCode!==void 0&&(a=t.sessionExpiredStatusCode);var u=403;if(t.invalidClaimStatusCode!==void 0&&(u=t.invalidClaimStatusCode),a===u)throw new Error("sessionExpiredStatusCode and invalidClaimStatusCode cannot be the same.");var l=!0;t.autoAddCredentials!==void 0&&(l=t.autoAddCredentials);var o=!1;t.isInIframe!==void 0&&(o=t.isInIframe);var c=void 0;t.sessionTokenBackendDomain!==void 0&&(c=Wt(t.sessionTokenBackendDomain));var d=10;if(t.maxRetryAttemptsForSessionRefresh!==void 0){if(t.maxRetryAttemptsForSessionRefresh<0)throw new Error("maxRetryAttemptsForSessionRefresh must be greater than or equal to 0.");d=t.maxRetryAttemptsForSessionRefresh}var p=function(T){return Bn(r,void 0,void 0,function(){return Gn(this,function(L){return[2,{url:T.url,requestInit:T.requestInit}]})})};t.preAPIHook!==void 0&&(p=t.preAPIHook);var R=function(){return Bn(r,void 0,void 0,function(){return Gn(this,function(T){return[2]})})};t.postAPIHook!==void 0&&(R=t.postAPIHook);var v=function(){};t.onHandleEvent!==void 0&&(v=t.onHandleEvent);var N=Bt({functions:function(T){return T}},t.override);return{apiDomain:e,apiBasePath:s,sessionTokenFrontendDomain:n,sessionExpiredStatusCode:a,invalidClaimStatusCode:u,autoAddCredentials:l,isInIframe:o,tokenTransferMethod:t.tokenTransferMethod!==void 0?t.tokenTransferMethod:"cookie",sessionTokenBackendDomain:c,maxRetryAttemptsForSessionRefresh:d,preAPIHook:p,postAPIHook:R,onHandleEvent:v,override:N}}B.validateAndNormaliseInputOrThrowError=ls;function ds(t){return t===void 0?{}:t}B.getNormalisedUserContext=ds;function fs(t,r){for(var e=t.split("."),s=0;s<e.length;s++){var i=e.slice(s).join(".");if(i===r||".".concat(i)===r)return!0}return!1}B.matchesDomainOrSubdomain=fs});var dt=y(ee=>{"use strict";var hs=ee&&ee.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},gs=ee&&ee.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(ee,"__esModule",{value:!0});ee.ProcessState=ee.PROCESS_STATE=void 0;var vs;(function(t){t[t.CALLING_INTERCEPTION_REQUEST=0]="CALLING_INTERCEPTION_REQUEST",t[t.CALLING_INTERCEPTION_RESPONSE=1]="CALLING_INTERCEPTION_RESPONSE"})(vs=ee.PROCESS_STATE||(ee.PROCESS_STATE={}));var ms=function(){function t(){var r=this;this.history=[],this.addState=function(e){try{process!==void 0&&process.env!==void 0&&process.env.TEST_MODE==="testing"&&r.history.push(e)}catch{}},this.getEventByLastEventByName=function(e){for(var s=r.history.length-1;s>=0;s--)if(r.history[s]==e)return r.history[s]},this.reset=function(){r.history=[]},this.waitForEvent=function(e,s){return s===void 0&&(s=7e3),hs(r,void 0,void 0,function(){var i,n=this;return gs(this,function(a){return i=Date.now(),[2,new Promise(function(u){var l=n;function o(){var c=l.getEventByLastEventByName(e);c===void 0?Date.now()-i>s?u(void 0):setTimeout(o,1e3):u(c)}o()})]})})}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t}();ee.ProcessState=ms});var ft=y(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.supported_fdi=Pe.package_version=void 0;Pe.package_version="20.1.6";Pe.supported_fdi=["1.16","1.17","1.18","1.19","2.0","3.0","3.1","4.0","4.1"]});var Jn=y(me=>{"use strict";var zn=me&&me.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},Yn=me&&me.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(me,"__esModule",{value:!0});me.defaultCookieHandlerImplementation=void 0;var Kn=ce();me.defaultCookieHandlerImplementation={getCookie:function(){return zn(this,void 0,void 0,function(){return Yn(this,function(t){return[2,Kn.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie]})})},setCookie:function(t){return zn(this,void 0,void 0,function(){return Yn(this,function(r){return Kn.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie=t,[2]})})}}});var Xt=y(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.CookieHandlerReference=void 0;var ps=Jn(),Qn=function(){function t(r){var e=function(s){return s};r!==void 0&&(e=r),this.cookieHandler=e(ps.defaultCookieHandlerImplementation)}return t.init=function(r){t.instance===void 0&&(t.instance=new t(r))},t.getReferenceOrThrow=function(){if(t.instance===void 0)throw new Error("SuperTokensCookieHandler must be initialized before calling this method.");return t.instance},t}();Be.CookieHandlerReference=Qn;Be.default=Qn});var $n=y(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});var ws=function(){function t(){var r=this;this.locked=new Map,this.addToLocked=function(e,s){var i=r.locked.get(e);i===void 0?s===void 0?r.locked.set(e,[]):r.locked.set(e,[s]):s!==void 0&&(i.unshift(s),r.locked.set(e,i))},this.isLocked=function(e){return r.locked.has(e)},this.lock=function(e){return new Promise(function(s,i){r.isLocked(e)?r.addToLocked(e,s):(r.addToLocked(e),s())})},this.unlock=function(e){var s=r.locked.get(e);if(s===void 0||s.length===0){r.locked.delete(e);return}var i=s.pop();r.locked.set(e,s),i!==void 0&&setTimeout(i,0)}}return t.getInstance=function(){return t.instance===void 0&&(t.instance=new t),t.instance},t}();function Ts(){return ws.getInstance()}zt.default=Ts});var Zn=y(pe=>{"use strict";var te=pe&&pe.__awaiter||function(t,r,e,s){return new(e||(e=Promise))(function(i,n){function a(o){try{l(s.next(o))}catch(c){n(c)}}function u(o){try{l(s.throw(o))}catch(c){n(c)}}function l(o){o.done?i(o.value):new e(function(c){c(o.value)}).then(a,u)}l((s=s.apply(t,r||[])).next())})},ne=pe&&pe.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Ge=pe;Object.defineProperty(pe,"__esModule",{value:!0});var Ne=$n(),Yt="browser-tabs-lock-key",ht={key:function(t){return te(Ge,void 0,void 0,function(){return ne(this,function(r){throw new Error("Unsupported")})})},getItem:function(t){return te(Ge,void 0,void 0,function(){return ne(this,function(r){throw new Error("Unsupported")})})},clear:function(){return te(Ge,void 0,void 0,function(){return ne(this,function(t){return[2,window.localStorage.clear()]})})},removeItem:function(t){return te(Ge,void 0,void 0,function(){return ne(this,function(r){throw new Error("Unsupported")})})},setItem:function(t,r){return te(Ge,void 0,void 0,function(){return ne(this,function(e){throw new Error("Unsupported")})})},keySync:function(t){return window.localStorage.key(t)},getItemSync:function(t){return window.localStorage.getItem(t)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(t){return window.localStorage.removeItem(t)},setItemSync:function(t,r){return window.localStorage.setItem(t,r)}};function Kt(t){return new Promise(function(r){return setTimeout(r,t)})}function Jt(t){for(var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",s=0;s<t;s++){var i=Math.floor(Math.random()*r.length);e+=r[i]}return e}function Ss(){return Date.now().toString()+Jt(15)}var ys=function(){function t(r){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Ss(),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=r,t.waiters===void 0&&(t.waiters=[])}return t.prototype.acquireLock=function(r,e){return e===void 0&&(e=5e3),te(this,void 0,void 0,function(){var s,i,n,a,u,l,o,c;return ne(this,function(d){switch(d.label){case 0:s=Date.now()+Jt(4),i=Date.now()+e,n=Yt+"-"+r,a=this.storageHandler===void 0?ht:this.storageHandler,d.label=1;case 1:return Date.now()<i?[4,Kt(30)]:[3,8];case 2:return d.sent(),u=a.getItemSync(n),u!==null?[3,5]:(l=this.id+"-"+r+"-"+s,[4,Kt(Math.floor(Math.random()*25))]);case 3:return d.sent(),a.setItemSync(n,JSON.stringify({id:this.id,iat:s,timeoutKey:l,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,Kt(30)];case 4:return d.sent(),o=a.getItemSync(n),o!==null&&(c=JSON.parse(o),c.id===this.id&&c.iat===s)?(this.acquiredIatSet.add(s),this.refreshLockWhileAcquired(n,s),[2,!0]):[3,7];case 5:return t.lockCorrector(this.storageHandler===void 0?ht:this.storageHandler),[4,this.waitForSomethingToChange(i)];case 6:d.sent(),d.label=7;case 7:return s=Date.now()+Jt(4),[3,1];case 8:return[2,!1]}})})},t.prototype.refreshLockWhileAcquired=function(r,e){return te(this,void 0,void 0,function(){var s=this;return ne(this,function(i){return setTimeout(function(){return te(s,void 0,void 0,function(){var n,a,u;return ne(this,function(l){switch(l.label){case 0:return[4,Ne.default().lock(e)];case 1:if(l.sent(),!this.acquiredIatSet.has(e))return Ne.default().unlock(e),[2];if(n=this.storageHandler===void 0?ht:this.storageHandler,a=n.getItemSync(r),a!==null)u=JSON.parse(a),u.timeRefreshed=Date.now(),n.setItemSync(r,JSON.stringify(u)),Ne.default().unlock(e);else return Ne.default().unlock(e),[2];return this.refreshLockWhileAcquired(r,e),[2]}})})},1e3),[2]})})},t.prototype.waitForSomethingToChange=function(r){return te(this,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,new Promise(function(s){var i=!1,n=Date.now(),a=50,u=!1;function l(){if(u||(window.removeEventListener("storage",l),t.removeFromWaiting(l),clearTimeout(o),u=!0),!i){i=!0;var c=a-(Date.now()-n);c>0?setTimeout(s,c):s(null)}}window.addEventListener("storage",l),t.addToWaiting(l);var o=setTimeout(l,Math.max(0,r-Date.now()))})];case 1:return e.sent(),[2]}})})},t.addToWaiting=function(r){this.removeFromWaiting(r),t.waiters!==void 0&&t.waiters.push(r)},t.removeFromWaiting=function(r){t.waiters!==void 0&&(t.waiters=t.waiters.filter(function(e){return e!==r}))},t.notifyWaiters=function(){if(t.waiters!==void 0){var r=t.waiters.slice();r.forEach(function(e){return e()})}},t.prototype.releaseLock=function(r){return te(this,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(r)];case 1:return[2,e.sent()]}})})},t.prototype.releaseLock__private__=function(r){return te(this,void 0,void 0,function(){var e,s,i,n;return ne(this,function(a){switch(a.label){case 0:return e=this.storageHandler===void 0?ht:this.storageHandler,s=Yt+"-"+r,i=e.getItemSync(s),i===null?[2]:(n=JSON.parse(i),n.id!==this.id?[3,2]:[4,Ne.default().lock(n.iat)]);case 1:a.sent(),this.acquiredIatSet.delete(n.iat),e.removeItemSync(s),Ne.default().unlock(n.iat),t.notifyWaiters(),a.label=2;case 2:return[2]}})})},t.lockCorrector=function(r){for(var e=Date.now()-5e3,s=r,i=[],n=0;;){var a=s.keySync(n);if(a===null)break;i.push(a),n++}for(var u=!1,l=0;l<i.length;l++){var o=i[l];if(o.includes(Yt)){var c=s.getItemSync(o);if(c!==null){var d=JSON.parse(c);(d.timeRefreshed===void 0&&d.timeAcquired<e||d.timeRefreshed!==void 0&&d.timeRefreshed<e)&&(s.removeItemSync(o),u=!0)}}}u&&t.notifyWaiters()},t.waiters=void 0,t}();pe.default=ys});var gt=y(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.LockFactoryReference=void 0;var ks=Zn(),Is=function(t){return function(){return Promise.resolve(new ks.default(t))}},er=function(){function t(r){this.lockFactory=r}return t.init=function(r,e){this.instance===void 0&&(this.instance=new t(r!=null?r:Is(e)))},t.getReferenceOrThrow=function(){if(t.instance===void 0)throw new Error("SuperTokensLockReference must be initialized before calling this method.");return t.instance},t}();We.LockFactoryReference=er;We.default=er});var Le=y(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.logDebugMessage=we.disableLogging=we.enableLogging=void 0;var bs=ft(),Rs="com.supertokens",Qt=!1;function Es(){Qt=!0}we.enableLogging=Es;function Cs(){Qt=!1}we.disableLogging=Cs;function As(t){Qt&&console.log("".concat(Rs,' {t: "').concat(new Date().toISOString(),'", message: "').concat(t,'", supertokens-website-ver: "').concat(bs.package_version,'"}'))}we.logDebugMessage=As});var nr=y(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.DateProvider=void 0;var tr=ce(),_s=function(){function t(){this.clockSkewInMillis=0,this.thresholdInSeconds=7}return t.init=function(){if(t.instance===void 0){t.instance=new t;var r=tr.default.getReferenceOrThrow().windowHandler.localStorage,e=r.getItemSync(t.CLOCK_SKEW_KEY),s=e!==null?parseInt(e,10):0;t.instance.setClientClockSkewInMillis(s)}},t.getReferenceOrThrow=function(){if(t.instance===void 0)throw new Error("DateProvider must be initialized before calling this method.");return t.instance},t.prototype.getThresholdInSeconds=function(){return this.thresholdInSeconds},t.prototype.setThresholdInSeconds=function(r){this.thresholdInSeconds=r},t.prototype.setClientClockSkewInMillis=function(r){this.clockSkewInMillis=Math.abs(r)>=this.thresholdInSeconds*1e3?r:0;var e=tr.default.getReferenceOrThrow().windowHandler.localStorage;e.setItemSync(t.CLOCK_SKEW_KEY,String(r))},t.prototype.getClientClockSkewInMillis=function(){return this.clockSkewInMillis},t.prototype.now=function(){return Date.now()+this.getClientClockSkewInMillis()},t.CLOCK_SKEW_KEY="__st_clockSkewInMillis",t}();vt.DateProvider=_s});var xe=y(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.DateProviderReference=void 0;var rr=nr(),sr=function(){function t(r){r!==void 0?this.dateProvider=r():(rr.DateProvider.init(),this.dateProvider=rr.DateProvider.getReferenceOrThrow())}return t.init=function(r){t.instance===void 0&&(t.instance=new t(r))},t.getReferenceOrThrow=function(){if(t.instance===void 0)throw new Error("SuperTokensDateProvider must be initialized before calling this method.");return t.instance},t}();Xe.DateProviderReference=sr;Xe.default=sr});var Fe=y(k=>{"use strict";var He=k&&k.__assign||function(){return He=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},He.apply(this,arguments)},F=k&&k.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},U=k&&k.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(k,"__esModule",{value:!0});k.updateClockSkewUsingFrontToken=k.fireSessionUpdateEventsIfNecessary=k.setFrontToken=k.getFrontToken=k.setAntiCSRF=k.saveLastAccessTokenUpdate=k.getTokenForHeaderAuth=k.setToken=k.getStorageNameForToken=k.getLocalSessionState=k.onInvalidClaimResponse=k.onTokenUpdate=k.onUnauthorisedResponse=k.FrontToken=k.AntiCsrfToken=void 0;var ir=dt(),Ds=ft(),mt=Xt(),Zt=ce(),Os=gt(),f=Le(),Ms=xe(),Qe=function(){function t(){}return t.getToken=function(r){return F(this,void 0,void 0,function(){var e;return U(this,function(s){switch(s.label){case 0:return(0,f.logDebugMessage)("AntiCsrfToken.getToken: called"),r===void 0?(t.tokenInfo=void 0,(0,f.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):t.tokenInfo!==void 0?[3,2]:[4,Ls()];case 1:return e=s.sent(),e===null?((0,f.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):(t.tokenInfo={antiCsrf:e,associatedAccessTokenUpdate:r},[3,4]);case 2:return t.tokenInfo.associatedAccessTokenUpdate===r?[3,4]:(t.tokenInfo=void 0,[4,t.getToken(r)]);case 3:return[2,s.sent()];case 4:return(0,f.logDebugMessage)("AntiCsrfToken.getToken: returning: "+t.tokenInfo.antiCsrf),[2,t.tokenInfo.antiCsrf]}})})},t.removeToken=function(){return F(this,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return(0,f.logDebugMessage)("AntiCsrfToken.removeToken: called"),t.tokenInfo=void 0,[4,nn(void 0)];case 1:return r.sent(),[2]}})})},t.setItem=function(r,e){return F(this,void 0,void 0,function(){return U(this,function(s){switch(s.label){case 0:return r===void 0?(t.tokenInfo=void 0,[2]):((0,f.logDebugMessage)("AntiCsrfToken.setItem: called"),[4,nn(e)]);case 1:return s.sent(),t.tokenInfo={antiCsrf:e,associatedAccessTokenUpdate:r},[2]}})})},t}();k.AntiCsrfToken=Qe;var ze=function(){function t(){}return t.getTokenInfo=function(){return F(this,void 0,void 0,function(){var r,e;return U(this,function(s){switch(s.label){case 0:return(0,f.logDebugMessage)("FrontToken.getTokenInfo: called"),[4,dr()];case 1:return r=s.sent(),r!==null?[3,5]:[4,re(!1)];case 2:return s.sent().status!=="EXISTS"?[3,4]:[4,new Promise(function(i){t.waiters.push(i)})];case 3:return s.sent(),[2,t.getTokenInfo()];case 4:return[2,void 0];case 5:return e=Tt(r),(0,f.logDebugMessage)("FrontToken.getTokenInfo: returning ate: "+e.ate),(0,f.logDebugMessage)("FrontToken.getTokenInfo: returning uid: "+e.uid),(0,f.logDebugMessage)("FrontToken.getTokenInfo: returning up: "+e.up),[2,e]}})})},t.removeToken=function(){return F(this,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return(0,f.logDebugMessage)("FrontToken.removeToken: called"),[4,rn(void 0)];case 1:return r.sent(),[4,Ye("access","")];case 2:return r.sent(),[4,Ye("refresh","")];case 3:return r.sent(),[4,Qe.removeToken()];case 4:return r.sent(),t.waiters.forEach(function(e){return e(void 0)}),t.waiters=[],[2]}})})},t.setItem=function(r){return F(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return[4,lr()];case 1:return e.sent(),r==="remove"?[2,t.removeToken()]:((0,f.logDebugMessage)("FrontToken.setItem: called"),[4,rn(r)]);case 2:return e.sent(),t.waiters.forEach(function(s){return s(void 0)}),t.waiters=[],[2]}})})},t.doesTokenExists=function(){return F(this,void 0,void 0,function(){var r;return U(this,function(e){switch(e.label){case 0:return[4,on()];case 1:return r=e.sent(),[2,r!==null]}})})},t.waiters=[],t}();k.FrontToken=ze;var V=function(){function t(){}t.init=function(e,s){(0,f.logDebugMessage)("init: called"),(0,f.logDebugMessage)("init: Input apiBasePath: "+e.apiBasePath),(0,f.logDebugMessage)("init: Input apiDomain: "+e.apiDomain),(0,f.logDebugMessage)("init: Input autoAddCredentials: "+e.autoAddCredentials),(0,f.logDebugMessage)("init: Input sessionTokenBackendDomain: "+e.sessionTokenBackendDomain),(0,f.logDebugMessage)("init: Input isInIframe: "+e.isInIframe),(0,f.logDebugMessage)("init: Input sessionExpiredStatusCode: "+e.sessionExpiredStatusCode),(0,f.logDebugMessage)("init: Input sessionTokenFrontendDomain: "+e.sessionTokenFrontendDomain),(0,f.logDebugMessage)("init: Input tokenTransferMethod: "+e.tokenTransferMethod);var i=Zt.default.getReferenceOrThrow().windowHandler.getWindowUnsafe();t.env=i===void 0||i.fetch===void 0?global:i,t.refreshTokenUrl=e.apiDomain+e.apiBasePath+"/session/refresh",t.signOutUrl=e.apiDomain+e.apiBasePath+"/signout",t.rid="session",t.config=e,t.env.__supertokensOriginalFetch===void 0&&((0,f.logDebugMessage)("init: __supertokensOriginalFetch is undefined"),t.env.__supertokensOriginalFetch=t.env.fetch.bind(t.env),t.env.__supertokensSessionRecipe=s,t.env.fetch=t.env.__supertokensSessionRecipe.addFetchInterceptorsAndReturnModifiedFetch({originalFetch:t.env.__supertokensOriginalFetch,userContext:{}}),t.env.__supertokensSessionRecipe.addXMLHttpRequestInterceptor({userContext:{}})),t.recipeImpl=t.env.__supertokensSessionRecipe,t.initCalled=!0};var r;return r=t,t.initCalled=!1,t.doRequest=function(e,s,i){return F(void 0,void 0,void 0,function(){var n,a,u,l,o,c,d,p,R,v,N,T,L,x,X;return U(r,function(H){switch(H.label){case 0:if(!t.initCalled)throw Error("init function not called");(0,f.logDebugMessage)("doRequest: start of fetch interception"),n=!1;try{a=void 0,typeof i=="string"?a=i:typeof i=="object"&&(typeof i.url=="string"?a=i.url:typeof i.href=="string"&&(a=i.href)),n=!t.recipeImpl.shouldDoInterceptionBasedOnUrl(a,t.config.apiDomain,t.config.sessionTokenBackendDomain)}catch(ue){if(ue.message==="Please provide a valid domain name")(0,f.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),n=!t.recipeImpl.shouldDoInterceptionBasedOnUrl(Zt.default.getReferenceOrThrow().windowHandler.location.getOrigin(),t.config.apiDomain,t.config.sessionTokenBackendDomain);else throw ue}return(0,f.logDebugMessage)("doRequest: Value of doNotDoInterception: "+n),n?((0,f.logDebugMessage)("doRequest: Returning without interception"),[4,e(s)]):[3,2];case 1:return[2,H.sent()];case 2:return u=new Headers(s!==void 0&&s.headers!==void 0?s.headers:i.headers),u.has("Authorization")?[4,Ke("access")]:[3,5];case 3:return l=H.sent(),[4,Ke("refresh")];case 4:o=H.sent(),l!==void 0&&o!==void 0&&u.get("Authorization")==="Bearer ".concat(l)&&((0,f.logDebugMessage)("doRequest: Removing Authorization from user provided headers because it contains our access token"),u.delete("Authorization")),H.label=5;case 5:(0,f.logDebugMessage)("doRequest: Interception started"),ir.ProcessState.getInstance().addState(ir.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),c=0,d=void 0,H.label=6;case 6:return[4,re(!0)];case 7:return p=H.sent(),R=new Headers(u),v=He(He({},s),{headers:R}),p.status!=="EXISTS"?[3,9]:[4,Qe.getToken(p.lastAccessTokenUpdate)];case 8:N=H.sent(),N!==void 0&&((0,f.logDebugMessage)("doRequest: Adding anti-csrf token to request"),R.set("anti-csrf",N)),H.label=9;case 9:return t.config.autoAddCredentials&&((0,f.logDebugMessage)("doRequest: Adding credentials include"),v===void 0?v={credentials:"include"}:v.credentials===void 0&&(v=He(He({},v),{credentials:"include"}))),R.has("rid")?(0,f.logDebugMessage)("doRequest: rid header was already there in request"):((0,f.logDebugMessage)("doRequest: Adding rid header: anti-csrf"),R.set("rid","anti-csrf")),T=t.config.tokenTransferMethod,(0,f.logDebugMessage)("doRequest: Adding st-auth-mode header: "+T),R.set("st-auth-mode",T),[4,ur(R)];case 10:return H.sent(),(0,f.logDebugMessage)("doRequest: Making user's http call"),[4,e(v)];case 11:return L=H.sent(),(0,f.logDebugMessage)("doRequest: User's http call ended"),[4,cr(L)];case 12:if(H.sent(),an(p.status==="EXISTS",L.status,L.headers.get("front-token")),L.status!==t.config.sessionExpiredStatusCode)return[3,14];if((0,f.logDebugMessage)("doRequest: Status code is: "+L.status),c>=t.config.maxRetryAttemptsForSessionRefresh)throw(0,f.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(c,", maxRetryAttemptsForSessionRefresh: ").concat(t.config.maxRetryAttemptsForSessionRefresh)),x="Received a 401 response from ".concat(i,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(t.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(x),new Error(x);return[4,wt(p)];case 13:if(X=H.sent(),c++,(0,f.logDebugMessage)("doRequest: sessionRefreshAttempts: "+c),X.result!=="RETRY"){if((0,f.logDebugMessage)("doRequest: Not retrying original request"),X.error!==void 0)if(X.error instanceof Response)d=X.error;else throw X.error;else d=L;return[3,18]}return(0,f.logDebugMessage)("doRequest: Retrying original request"),[3,17];case 14:return L.status!==t.config.invalidClaimStatusCode?[3,16]:[4,ar(L)];case 15:H.sent(),H.label=16;case 16:return[2,L];case 17:return[3,6];case 18:return[2,d]}})})},t.attemptRefreshingSession=function(){return F(void 0,void 0,void 0,function(){var e,s;return U(r,function(i){switch(i.label){case 0:if(!t.initCalled)throw Error("init function not called");return[4,re(!1)];case 1:return e=i.sent(),[4,wt(e)];case 2:if(s=i.sent(),s.result==="API_ERROR")throw s.error;return[2,s.result==="RETRY"]}})})},t}();k.default=V;var pt="st-last-access-token-update",Ps="st-refresh-token",Ns="st-access-token",en="sAntiCsrf",tn="sFrontToken";function wt(t){return F(this,void 0,void 0,function(){var r,e,s,i,n,a,u,l,o,c,d,p,R,v,N;return U(this,function(T){switch(T.label){case 0:return[4,Os.default.getReferenceOrThrow().lockFactory()];case 1:r=T.sent(),T.label=2;case 2:return(0,f.logDebugMessage)("onUnauthorisedResponse: trying to acquire lock"),[4,r.acquireLock("REFRESH_TOKEN_USE",1e3)];case 3:if(!T.sent())return[3,21];(0,f.logDebugMessage)("onUnauthorisedResponse: lock acquired"),T.label=4;case 4:return T.trys.push([4,17,19,21]),[4,re(!1)];case 5:return e=T.sent(),e.status==="NOT_EXISTS"?((0,f.logDebugMessage)("onUnauthorisedResponse: Not refreshing because local session state is NOT_EXISTS"),V.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!1,userContext:{}}),[2,{result:"SESSION_EXPIRED"}]):(s=e.status==="EXISTS",i=t.status==="EXISTS",n=e.status!==t.status,a="lastAccessTokenUpdate"in e&&"lastAccessTokenUpdate"in t&&e.lastAccessTokenUpdate!==t.lastAccessTokenUpdate,n&&s?((0,f.logDebugMessage)("onUnauthorisedResponse: Retrying early because session status has changed and postLockLSS.status is EXISTS"),[2,{result:"RETRY"}]):s&&i&&a?((0,f.logDebugMessage)("onUnauthorisedResponse: Retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):(u=new Headers,t.status!=="EXISTS"?[3,7]:[4,Qe.getToken(t.lastAccessTokenUpdate)]));case 6:l=T.sent(),l!==void 0&&((0,f.logDebugMessage)("onUnauthorisedResponse: Adding anti-csrf token to refresh API call"),u.set("anti-csrf",l)),T.label=7;case 7:return(0,f.logDebugMessage)("onUnauthorisedResponse: Adding rid and fdi-versions to refresh call header"),u.set("rid",V.rid),u.set("fdi-version",Ds.supported_fdi.join(",")),o=V.config.tokenTransferMethod,(0,f.logDebugMessage)("onUnauthorisedResponse: Adding st-auth-mode header: "+o),u.set("st-auth-mode",o),[4,ur(u,!0)];case 8:return T.sent(),(0,f.logDebugMessage)("onUnauthorisedResponse: Calling refresh pre API hook"),[4,V.config.preAPIHook({action:"REFRESH_SESSION",requestInit:{method:"post",credentials:"include",headers:u},url:V.refreshTokenUrl,userContext:{}})];case 9:return c=T.sent(),(0,f.logDebugMessage)("onUnauthorisedResponse: Making refresh call"),[4,V.env.__supertokensOriginalFetch(c.url,c.requestInit)];case 10:return d=T.sent(),(0,f.logDebugMessage)("onUnauthorisedResponse: Refresh call ended"),[4,cr(d)];case 11:return T.sent(),(0,f.logDebugMessage)("onUnauthorisedResponse: Refresh status code is: "+d.status),p=d.status===V.config.sessionExpiredStatusCode,d.headers.get("front-token")!==null?[3,14]:p?[4,ze.setItem("remove")]:[3,13];case 12:return T.sent(),[3,14];case 13:if(d.status===200)throw R="The 'front-token' header is missing from a successful refresh-session response. The most likely causes are proxy settings (e.g.: 'front-token' missing from 'access-control-expose-headers' or a proxy stripping this header). Please investigate your API.",console.error(R),new Error(R);T.label=14;case 14:if(an(t.status==="EXISTS",d.status,p&&d.headers.get("front-token")===null?"remove":d.headers.get("front-token")),d.status>=300)throw d;return[4,V.config.postAPIHook({action:"REFRESH_SESSION",fetchResponse:d.clone(),requestInit:c.requestInit,url:c.url,userContext:{}})];case 15:return T.sent(),[4,re(!1)];case 16:return T.sent().status==="NOT_EXISTS"?((0,f.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED"}]):(V.config.onHandleEvent({action:"REFRESH_SESSION",userContext:{}}),(0,f.logDebugMessage)("onUnauthorisedResponse: Sending RETRY signal"),[2,{result:"RETRY"}]);case 17:return v=T.sent(),[4,re(!1)];case 18:return T.sent().status==="NOT_EXISTS"?((0,f.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED",error:v}]):((0,f.logDebugMessage)("onUnauthorisedResponse: sending API_ERROR"),[2,{result:"API_ERROR",error:v}]);case 19:return[4,r.releaseLock("REFRESH_TOKEN_USE")];case 20:return T.sent(),(0,f.logDebugMessage)("onUnauthorisedResponse: Released lock"),[7];case 21:return[4,re(!1)];case 22:return N=T.sent(),N.status==="NOT_EXISTS"?((0,f.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and local session doesn't exist, so sending SESSION_EXPIRED"),[2,{result:"SESSION_EXPIRED"}]):N.status!==t.status||N.status==="EXISTS"&&t.status==="EXISTS"&&N.lastAccessTokenUpdate!==t.lastAccessTokenUpdate?((0,f.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):[3,2];case 23:return[2]}})})}k.onUnauthorisedResponse=wt;function or(){(0,f.logDebugMessage)("onTokenUpdate: firing ACCESS_TOKEN_PAYLOAD_UPDATED event"),V.config.onHandleEvent({action:"ACCESS_TOKEN_PAYLOAD_UPDATED",userContext:{}})}k.onTokenUpdate=or;function ar(t){return F(this,void 0,void 0,function(){var r,e;return U(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,V.recipeImpl.getInvalidClaimsFromResponse({response:t,userContext:{}})];case 1:return r=s.sent(),r&&V.config.onHandleEvent({action:"API_INVALID_CLAIM",claimValidationErrors:r,userContext:{}}),[3,3];case 2:return e=s.sent(),[3,3];case 3:return[2]}})})}k.onInvalidClaimResponse=ar;function re(t){return F(this,void 0,void 0,function(){var r,e,s,i,n,a,u;return U(this,function(l){switch(l.label){case 0:return(0,f.logDebugMessage)("getLocalSessionState: called"),[4,Je(pt)];case 1:return r=l.sent(),[4,ze.doesTokenExists()];case 2:return e=l.sent(),e&&r!==void 0?((0,f.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists"),[2,{status:"EXISTS",lastAccessTokenUpdate:r}]):[3,3];case 3:return r?((0,f.logDebugMessage)("getLocalSessionState: returning NOT_EXISTS since frontToken was cleared but lastAccessTokenUpdate exists"),[2,{status:"NOT_EXISTS"}]):[3,4];case 4:return s={status:"MAY_EXIST"},t?((0,f.logDebugMessage)("getLocalSessionState: trying to refresh"),[4,wt(s)]):[3,8];case 5:return i=l.sent(),i.result!=="RETRY"?((0,f.logDebugMessage)("getLocalSessionState: return NOT_EXISTS in case error from backend"+i.result),[2,{status:"NOT_EXISTS"}]):[4,Je(pt)];case 6:return n=l.sent(),[4,ze.doesTokenExists()];case 7:if(a=l.sent(),!a||n===void 0)throw u="Failed to retrieve local session state from cookies after a successful session refresh. This indicates a configuration error or that the browser is preventing cookie writes.",console.error(u),new Error(u);return(0,f.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists post refresh"),[2,{status:"EXISTS",lastAccessTokenUpdate:n}];case 8:return(0,f.logDebugMessage)("getLocalSessionState: returning: "+s.status),[2,s]}})})}k.getLocalSessionState=re;function sn(t){switch(t){case"access":return Ns;case"refresh":return Ps}}k.getStorageNameForToken=sn;function Ye(t,r){var e=sn(t);return r!==""?((0,f.logDebugMessage)("setToken: saved ".concat(t," token into cookies")),Te(e,r,Date.now()+31536e5)):((0,f.logDebugMessage)("setToken: cleared ".concat(t," token from cookies")),Te(e,r,0))}k.setToken=Ye;function Te(t,r,e){var s="Fri, 31 Dec 9999 23:59:59 GMT";e!==Number.MAX_SAFE_INTEGER&&(s=new Date(e).toUTCString());var i=V.config.sessionTokenFrontendDomain;return i==="localhost"||i===Zt.default.getReferenceOrThrow().windowHandler.location.getHostName()?mt.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(t,"=").concat(r,";expires=").concat(s,";path=/;samesite=").concat(V.config.isInIframe?"none;secure":"lax")):mt.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(t,"=").concat(r,";expires=").concat(s,";domain=").concat(i,";path=/;samesite=").concat(V.config.isInIframe?"none;secure":"lax"))}function Ke(t){return F(this,void 0,void 0,function(){var r;return U(this,function(e){return r=sn(t),[2,Je(r)]})})}k.getTokenForHeaderAuth=Ke;function Je(t){return F(this,void 0,void 0,function(){var r,e,s,i;return U(this,function(n){switch(n.label){case 0:return e="; ",[4,mt.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return r=e+n.sent(),s=r.split("; "+t+"="),s.length>=2&&(i=s.pop(),i!==void 0)?[2,i.split(";").shift()]:[2,void 0]}})})}function ur(t,r){return r===void 0&&(r=!1),F(this,void 0,void 0,function(){var e,s;return U(this,function(i){switch(i.label){case 0:return(0,f.logDebugMessage)("setTokenHeaders: adding existing tokens as header"),[4,Ke("access")];case 1:return e=i.sent(),[4,Ke("refresh")];case 2:return s=i.sent(),(r||e!==void 0)&&s!==void 0?t.has("Authorization")?(0,f.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,f.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),t.set("Authorization","Bearer ".concat(r?s:e))):(0,f.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function cr(t){return F(this,void 0,void 0,function(){var r,e,s,i,n;return U(this,function(a){switch(a.label){case 0:return(0,f.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response headers"),r=t.headers.get("st-refresh-token"),r===null?[3,2]:((0,f.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,Ye("refresh",r)]);case 1:a.sent(),a.label=2;case 2:return e=t.headers.get("st-access-token"),e===null?[3,4]:((0,f.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,Ye("access",e)]);case 3:a.sent(),a.label=4;case 4:return s=t.headers.get("front-token"),s===null?[3,6]:((0,f.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+s),[4,ze.setItem(s)]);case 5:a.sent(),(0,k.updateClockSkewUsingFrontToken)({frontToken:s,responseHeaders:t.headers}),a.label=6;case 6:return i=t.headers.get("anti-csrf"),i===null?[3,9]:[4,re(!1)];case 7:return n=a.sent(),n.status!=="EXISTS"?[3,9]:((0,f.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,Qe.setItem(n.lastAccessTokenUpdate,i)]);case 8:a.sent(),a.label=9;case 9:return[2]}})})}var $t=void 0;function lr(){return F(this,void 0,void 0,function(){var t;return U(this,function(r){switch(r.label){case 0:return(0,f.logDebugMessage)("saveLastAccessTokenUpdate: called"),t=Date.now().toString(),(0,f.logDebugMessage)("saveLastAccessTokenUpdate: setting "+t),[4,Te(pt,t,Number.MAX_SAFE_INTEGER)];case 1:return r.sent(),$t!==void 0?[3,3]:[4,Je(pt)];case 2:$t=r.sent()===t,r.label=3;case 3:return $t===!1&&console.warn("Saving to cookies was not successful, this indicates a configuration error or the browser preventing us from writing the cookies."),[4,Te("sIRTFrontend","",0)];case 4:return r.sent(),[2]}})})}k.saveLastAccessTokenUpdate=lr;function Ls(){return F(this,void 0,void 0,function(){function t(){return F(this,void 0,void 0,function(){var e,s,i,n,a;return U(this,function(u){switch(u.label){case 0:return s="; ",[4,mt.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return e=s+u.sent(),i=e.split("; "+en+"="),i.length>=2&&(n=i.pop(),n!==void 0)?(a=n.split(";").shift(),a===void 0?[2,null]:[2,a]):[2,null]}})})}var r;return U(this,function(e){switch(e.label){case 0:return(0,f.logDebugMessage)("getAntiCSRFToken: called"),[4,re(!0)];case 1:return e.sent().status!=="EXISTS"?((0,f.logDebugMessage)("getAntiCSRFToken: Returning because local session state != EXISTS"),[2,null]):[4,t()];case 2:return r=e.sent(),(0,f.logDebugMessage)("getAntiCSRFToken: returning: "+r),[2,r]}})})}function nn(t){return F(this,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return(0,f.logDebugMessage)("setAntiCSRF: called: "+t),t===void 0?[3,2]:[4,Te(en,t,Number.MAX_SAFE_INTEGER)];case 1:return r.sent(),[3,4];case 2:return[4,Te(en,"",0)];case 3:r.sent(),r.label=4;case 4:return[2]}})})}k.setAntiCSRF=nn;function on(){return F(this,void 0,void 0,function(){var t;return U(this,function(r){switch(r.label){case 0:return(0,f.logDebugMessage)("getFrontTokenFromCookie: called"),[4,Je(tn)];case 1:return t=r.sent(),[2,t===void 0?null:t]}})})}function Tt(t){return JSON.parse(decodeURIComponent(escape(atob(t))))}function dr(){return F(this,void 0,void 0,function(){var t;return U(this,function(r){switch(r.label){case 0:return(0,f.logDebugMessage)("getFrontToken: called"),[4,re(!0)];case 1:return r.sent().status!=="EXISTS"?((0,f.logDebugMessage)("getFrontToken: Returning because sIRTFrontend != EXISTS"),[2,null]):[4,on()];case 2:return t=r.sent(),(0,f.logDebugMessage)("getFrontToken: returning: "+t),[2,t]}})})}k.getFrontToken=dr;function rn(t){return F(this,void 0,void 0,function(){var r,e,s;return U(this,function(i){switch(i.label){case 0:return(0,f.logDebugMessage)("setFrontToken: called"),[4,on()];case 1:return r=i.sent(),r!==null&&t!==void 0&&(e=Tt(r).up,s=Tt(t).up,JSON.stringify(e)!==JSON.stringify(s)&&or()),t!==void 0?[3,3]:[4,Te(tn,"",0)];case 2:return i.sent(),[3,5];case 3:return[4,Te(tn,t,Number.MAX_SAFE_INTEGER)];case 4:i.sent(),i.label=5;case 5:return[2]}})})}k.setFrontToken=rn;function an(t,r,e){if(e==null){(0,f.logDebugMessage)("fireSessionUpdateEventsIfNecessary returning early because the front token was not updated");return}var s=e!=="remove";(0,f.logDebugMessage)("fireSessionUpdateEventsIfNecessary wasLoggedIn: ".concat(t," frontTokenExistsAfter: ").concat(s," status: ").concat(r)),t?s||(r===V.config.sessionExpiredStatusCode?((0,f.logDebugMessage)("onUnauthorisedResponse: firing UNAUTHORISED event"),V.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!0,userContext:{}})):((0,f.logDebugMessage)("onUnauthorisedResponse: firing SIGN_OUT event"),V.config.onHandleEvent({action:"SIGN_OUT",userContext:{}}))):s&&((0,f.logDebugMessage)("onUnauthorisedResponse: firing SESSION_CREATED event"),V.config.onHandleEvent({action:"SESSION_CREATED",userContext:{}}))}k.fireSessionUpdateEventsIfNecessary=an;var xs=function(t){var r=t.frontToken,e=t.responseHeaders;if((0,f.logDebugMessage)("updateClockSkewUsingFrontToken: frontToken: "+r),r==null||r==="remove"){(0,f.logDebugMessage)("updateClockSkewUsingFrontToken: the access token payload wasn't updated or is being removed, skipping clock skew update");return}var s=Tt(r),i=V.recipeImpl.calculateClockSkewInMillis({accessTokenPayload:s.up,responseHeaders:e});Ms.default.getReferenceOrThrow().dateProvider.setClientClockSkewInMillis(i),(0,f.logDebugMessage)("updateClockSkewUsingFrontToken: Client clock synchronized successfully")};k.updateClockSkewUsingFrontToken=xs});var un=y($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.SessionClaimValidatorStore=void 0;var fr=function(){function t(){}return t.claimValidatorsAddedByOtherRecipes=[],t.addClaimValidatorFromOtherRecipe=function(r){t.claimValidatorsAddedByOtherRecipes.push(r)},t.getClaimValidatorsAddedByOtherRecipes=function(){return t.claimValidatorsAddedByOtherRecipes},t}();$e.SessionClaimValidatorStore=fr;$e.default=fr});var hr=y(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.getGlobalClaimValidators=void 0;var Hs=lt(),Fs=Fe(),Us=un();function qs(t,r){var e=(0,Hs.getNormalisedUserContext)(r),s=Us.default.getClaimValidatorsAddedByOtherRecipes(),i=Fs.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:s,userContext:e}),n=t!==void 0?t(i,e):i;return n}St.getGlobalClaimValidators=qs});var gr=y(yt=>{"use strict";function Vs(t){for(var r in t)yt.hasOwnProperty(r)||(yt[r]=t[r])}yt.__esModule=!0;Vs(hr())});var ln=y(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.normaliseUser=P.normaliseUserResponse=P.getGlobalClaimValidators=P.getHashFromLocation=P.getNormalisedUserContext=P.checkForSSRErrorAndAppendIfNeeded=P.getAllQueryParams=P.getQueryParams=P.isTest=P.normaliseInputAppInfoOrThrowError=P.appendQueryParamsToURL=void 0;var cn=Nn(),vr=Ln(),js=Hn(),kt=Fn(),Bs=gr();function Gs(t,r){if(r===void 0)return t;try{var e=new URL(t);return Object.entries(r).forEach(function(n){var a=n[0],u=n[1];e.searchParams.set(a,u)}),e.href}catch{var s=t.startsWith("/")?"http:localhost":"http://localhost/",i=new URL("".concat(s).concat(t));return Object.entries(r).forEach(function(a){var u=a[0],l=a[1];i.searchParams.set(u,l)}),"".concat(i.pathname).concat(i.search)}}P.appendQueryParamsToURL=Gs;function Ws(t,r){return r!==void 0?new kt.default(r):new kt.default(t)}function Xs(t){if(t===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(t.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(t.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");var r=new kt.default("");return t.apiGatewayPath!==void 0&&(r=new kt.default(t.apiGatewayPath)),{appName:t.appName,apiDomain:new js.default(t.apiDomain),apiBasePath:r.appendPath(Ws(vr.DEFAULT_API_BASE_PATH,t.apiBasePath))}}P.normaliseInputAppInfoOrThrowError=Xs;function zs(){try{return process.env.TEST_MODE==="testing"}catch{return!1}}P.isTest=zs;function Ys(t){var r=new URLSearchParams(cn.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()),e=r.get(t);if(e!==null)return e}P.getQueryParams=Ys;function Ks(){return new URLSearchParams(cn.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch())}P.getAllQueryParams=Ks;function Js(t){return typeof window>"u"&&(t=t+vr.SSR_ERROR),t}P.checkForSSRErrorAndAppendIfNeeded=Js;function Qs(t){return t===void 0?{}:t}P.getNormalisedUserContext=Qs;function $s(){return cn.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}P.getHashFromLocation=$s;function Zs(t){var r=t.overrideGlobalClaimValidators,e=t.userContext;return(0,Bs.getGlobalClaimValidators)(r,e)}P.getGlobalClaimValidators=Zs;function ei(t,r){return"createdNewRecipeUser"in r?r:{createdNewRecipeUser:r.createdNewUser,user:mr(t,r.user)}}P.normaliseUserResponse=ei;function mr(t,r){if("loginMethods"in r)return r;var e=r.email!==void 0?[r.email]:[],s=r.phoneNumber!==void 0?[r.phoneNumber]:[],i=r.thirdParty!==void 0?[r.thirdParty]:[],n=r.webauthn!==void 0?r.webauthn:{credentialIds:[]};return{id:r.id,emails:e,phoneNumbers:s,thirdParty:i,webauthn:n,isPrimaryUser:!1,tenantIds:r.tenantIds,timeJoined:r.timeJoined,loginMethods:[{recipeId:t,recipeUserId:r.id,timeJoined:r.timeJoined,tenantIds:r.tenantIds,email:r.email,phoneNumber:r.email}]}}P.normaliseUser=mr});var pr=y(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var ti=function(){function t(r){this.config=r}return t}();dn.default=ti});var wr=y(Se=>{"use strict";var ni=Se&&Se.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},ri=Se&&Se.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Se,"__esModule",{value:!0});Se.createAxiosErrorFromFetchResp=void 0;function si(t,r,e,s,i){return t.config=r,e&&(t.code=e),t.request=s,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}function ii(t){return ni(this,void 0,void 0,function(){var r,e,s,i,n,a;return ri(this,function(u){switch(u.label){case 0:if(r={url:t.url,headers:t.headers},e="status"in t,!e)return[3,12];if(i=t.headers.get("content-type"),n=void 0,i!==null)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.text()];case 2:return n=u.sent(),[3,4];case 3:return a=u.sent(),n="",[3,4];case 4:return[3,11];case 5:return i.includes("application/json")?[4,t.json()]:[3,7];case 6:return n=u.sent(),[3,11];case 7:return i.includes("text/")?[4,t.text()]:[3,9];case 8:return n=u.sent(),[3,11];case 9:return[4,t.blob()];case 10:n=u.sent(),u.label=11;case 11:s={data:n,status:t.status,statusText:t.statusText,headers:t.headers,config:r,request:void 0},u.label=12;case 12:return[2,si(e?new Error("Request failed with status code "+t.status):t,r,t.code,void 0,s)]}})})}Se.createAxiosErrorFromFetchResp=ii});var yr=y(z=>{"use strict";var M=z&&z.__assign||function(){return M=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},M.apply(this,arguments)},Ee=z&&z.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},Ce=z&&z.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0});z.responseErrorInterceptor=z.responseInterceptor=z.interceptorFunctionRequestFulfilled=void 0;var oi=wr(),g=Fe(),It=dt(),hn=ce(),w=Le();function ai(t){t.__supertokensSessionRefreshAttempts===void 0&&(t.__supertokensSessionRefreshAttempts=0),t.__supertokensSessionRefreshAttempts++}function ui(t){return t.__supertokensSessionRefreshAttempts===void 0&&(t.__supertokensSessionRefreshAttempts=0),t.__supertokensSessionRefreshAttempts>=g.default.config.maxRetryAttemptsForSessionRefresh}function gn(t){var r=t.url===void 0?"":t.url,e=t.baseURL;return e!==void 0&&(r.charAt(0)==="/"&&e.charAt(e.length-1)==="/"?r=e+r.substr(1):r.charAt(0)!=="/"&&e.charAt(e.length-1)!=="/"?r=e+"/"+r:r=e+r),r}function ci(t){return Ee(this,void 0,void 0,function(){var r,e,s,i,n,a;return Ce(this,function(u){switch(u.label){case 0:(0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: started axios interception"),r=gn(t),e=!1;try{e=typeof r=="string"&&!g.default.recipeImpl.shouldDoInterceptionBasedOnUrl(r,g.default.config.apiDomain,g.default.config.sessionTokenBackendDomain)}catch(l){if(l.message==="Please provide a valid domain name")(0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Trying shouldDoInterceptionBasedOnUrl with location.origin"),e=!g.default.recipeImpl.shouldDoInterceptionBasedOnUrl(hn.default.getReferenceOrThrow().windowHandler.location.getOrigin(),g.default.config.apiDomain,g.default.config.sessionTokenBackendDomain);else throw l}return(0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Value of doNotDoInterception: "+e),e?((0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Returning config unchanged"),[2,t]):((0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Modifying config"),It.ProcessState.getInstance().addState(It.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),[4,(0,g.getLocalSessionState)(!0)]);case 1:return s=u.sent(),i=t,s.status!=="EXISTS"?[3,3]:[4,g.AntiCsrfToken.getToken(s.lastAccessTokenUpdate)];case 2:n=u.sent(),n!==void 0&&((0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding anti-csrf token to request"),i=M(M({},i),{headers:i===void 0?{"anti-csrf":n}:M(M({},i.headers),{"anti-csrf":n})})),u.label=3;case 3:return g.default.config.autoAddCredentials&&i.withCredentials===void 0&&((0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding credentials include"),i=M(M({},i),{withCredentials:!0})),(0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding rid header: anti-csrf (it may be overriden by the user's provided rid)"),i=M(M({},i),{headers:i===void 0?{rid:"anti-csrf"}:M({rid:"anti-csrf"},i.headers)}),a=g.default.config.tokenTransferMethod,(0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding st-auth-mode header: "+a),i.headers["st-auth-mode"]=a,[4,Sr(i)];case 4:return i=u.sent(),[4,Tr(i)];case 5:return u.sent(),(0,w.logDebugMessage)("interceptorFunctionRequestFulfilled: returning modified config"),[2,i]}})})}z.interceptorFunctionRequestFulfilled=ci;function li(t){var r=this;return function(e){return Ee(r,void 0,void 0,function(){var s,i,n,a;return Ce(this,function(u){switch(u.label){case 0:if(s=!1,!g.default.initCalled)throw new Error("init function not called");(0,w.logDebugMessage)("responseInterceptor: started"),(0,w.logDebugMessage)("responseInterceptor: already intercepted: "+e.headers["x-supertokens-xhr-intercepted"]),i=gn(e.config);try{s=typeof i=="string"&&!g.default.recipeImpl.shouldDoInterceptionBasedOnUrl(i,g.default.config.apiDomain,g.default.config.sessionTokenBackendDomain)||!!e.headers["x-supertokens-xhr-intercepted"]}catch(l){if(l.message==="Please provide a valid domain name")(0,w.logDebugMessage)("responseInterceptor: Trying shouldDoInterceptionBasedOnUrl with location.origin"),s=!g.default.recipeImpl.shouldDoInterceptionBasedOnUrl(hn.default.getReferenceOrThrow().windowHandler.location.getOrigin(),g.default.config.apiDomain,g.default.config.sessionTokenBackendDomain)||!!e.headers["x-supertokens-xhr-intercepted"];else throw l}return(0,w.logDebugMessage)("responseInterceptor: Value of doNotDoInterception: "+s),s?((0,w.logDebugMessage)("responseInterceptor: Returning without interception"),[2,e]):((0,w.logDebugMessage)("responseInterceptor: Interception started"),It.ProcessState.getInstance().addState(It.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),[4,(0,g.getLocalSessionState)(!1)]);case 1:return n=u.sent(),[4,fn(e)];case 2:return u.sent(),(0,g.fireSessionUpdateEventsIfNecessary)(n.status==="EXISTS",e.status,e.headers["front-token"]),e.status!==g.default.config.sessionExpiredStatusCode?[3,3]:((0,w.logDebugMessage)("responseInterceptor: Status code is: "+e.status),a=e.config,[2,vn.doRequest(function(l){return t(l)},a,i,e,void 0,!0)]);case 3:return e.status!==g.default.config.invalidClaimStatusCode?[3,5]:[4,(0,g.onInvalidClaimResponse)(e)];case 4:u.sent(),u.label=5;case 5:return[2,e]}})})}}z.responseInterceptor=li;function di(t){var r=this;return function(e){return Ee(r,void 0,void 0,function(){var s;return Ce(this,function(i){switch(i.label){case 0:if((0,w.logDebugMessage)("responseErrorInterceptor: called"),(0,w.logDebugMessage)("responseErrorInterceptor: already intercepted: "+(e.response&&e.response.headers["x-supertokens-xhr-intercepted"])),e.response===void 0||e.response.headers["x-supertokens-xhr-intercepted"])throw e;return e.response!==void 0&&e.response.status===g.default.config.sessionExpiredStatusCode?((0,w.logDebugMessage)("responseErrorInterceptor: Status code is: "+e.response.status),s=e.config,[2,vn.doRequest(function(n){return t(n)},s,gn(s),void 0,e,!0)]):[3,1];case 1:return e.response!==void 0&&e.response.status===g.default.config.invalidClaimStatusCode?[4,(0,g.onInvalidClaimResponse)(e.response)]:[3,3];case 2:i.sent(),i.label=3;case 3:throw e}})})}}z.responseErrorInterceptor=di;var vn=function(){function t(){}var r;return r=t,t.doRequest=function(e,s,i,n,a,u){return u===void 0&&(u=!1),Ee(void 0,void 0,void 0,function(){var l,o,c,d,p,R,v,N,x,T,L,x,X,H,ue;return Ce(r,function(h){switch(h.label){case 0:if(!g.default.initCalled)throw Error("init function not called");(0,w.logDebugMessage)("doRequest: called"),l=!1;try{l=typeof i=="string"&&!g.default.recipeImpl.shouldDoInterceptionBasedOnUrl(i,g.default.config.apiDomain,g.default.config.sessionTokenBackendDomain)&&u}catch(m){if(m.message==="Please provide a valid domain name")(0,w.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),l=!g.default.recipeImpl.shouldDoInterceptionBasedOnUrl(hn.default.getReferenceOrThrow().windowHandler.location.getOrigin(),g.default.config.apiDomain,g.default.config.sessionTokenBackendDomain)&&u;else throw m}if((0,w.logDebugMessage)("doRequest: Value of doNotDoInterception: "+l),!l)return[3,2];if((0,w.logDebugMessage)("doRequest: Returning without interception"),a!==void 0)throw a;return n!==void 0?[2,n]:[4,e(s)];case 1:return[2,h.sent()];case 2:return(0,w.logDebugMessage)("doRequest: Interception started"),[4,Sr(s)];case 3:s=h.sent(),o=void 0,h.label=4;case 4:return[4,(0,g.getLocalSessionState)(!0)];case 5:return c=h.sent(),d=s,c.status!=="EXISTS"?[3,7]:[4,g.AntiCsrfToken.getToken(c.lastAccessTokenUpdate)];case 6:p=h.sent(),p!==void 0&&((0,w.logDebugMessage)("doRequest: Adding anti-csrf token to request"),d=M(M({},d),{headers:d===void 0?{"anti-csrf":p}:M(M({},d.headers),{"anti-csrf":p})})),h.label=7;case 7:return g.default.config.autoAddCredentials&&d.withCredentials===void 0&&((0,w.logDebugMessage)("doRequest: Adding credentials include"),d=M(M({},d),{withCredentials:!0})),(0,w.logDebugMessage)("doRequest: Adding rid header: anti-csrf (May get overriden by user's rid)"),d=M(M({},d),{headers:d===void 0?{rid:"anti-csrf"}:M({rid:"anti-csrf"},d.headers)}),R=g.default.config.tokenTransferMethod,(0,w.logDebugMessage)("doRequest: Adding st-auth-mode header: "+R),d.headers["st-auth-mode"]=R,[4,Tr(d)];case 8:h.sent(),h.label=9;case 9:if(h.trys.push([9,14,,27]),v=a,N=n,a=void 0,n=void 0,v!==void 0)throw(0,w.logDebugMessage)("doRequest: Not making call because localPrevError is not undefined"),v;return N!==void 0?(0,w.logDebugMessage)("doRequest: Not making call because localPrevResponse is not undefined"):(0,w.logDebugMessage)("doRequest: Making user's http call"),N!==void 0?[3,11]:[4,e(d)];case 10:return T=h.sent(),[3,12];case 11:T=N,h.label=12;case 12:return x=T,(0,w.logDebugMessage)("doRequest: User's http call ended"),[4,fn(x)];case 13:return h.sent(),(0,g.fireSessionUpdateEventsIfNecessary)(c.status==="EXISTS",x.status,x.headers["front-token"]),[2,x];case 14:return L=h.sent(),x=L.response,x===void 0?[3,25]:[4,fn(x)];case 15:if(h.sent(),(0,g.fireSessionUpdateEventsIfNecessary)(c.status==="EXISTS",x.status,x.headers["front-token"]),x.status!==g.default.config.sessionExpiredStatusCode)return[3,21];if((0,w.logDebugMessage)("doRequest: Status code is: "+x.status),ui(s))throw(0,w.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(s.__supertokensSessionRefreshAttempts,", maxRetryAttemptsForSessionRefresh: ").concat(g.default.config.maxRetryAttemptsForSessionRefresh)),X="Received a 401 response from ".concat(i,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(g.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(X),new Error(X);return[4,(0,g.onUnauthorisedResponse)(c)];case 16:return H=h.sent(),ai(s),(0,w.logDebugMessage)("doRequest: sessionRefreshAttempts: "+s.__supertokensSessionRefreshAttempts),H.result==="RETRY"?[3,20]:((0,w.logDebugMessage)("doRequest: Not retrying original request"),H.error===void 0?[3,18]:[4,(0,oi.createAxiosErrorFromFetchResp)(H.error)]);case 17:return ue=h.sent(),[3,19];case 18:ue=L,h.label=19;case 19:return o=ue,[3,28];case 20:return(0,w.logDebugMessage)("doRequest: Retrying original request"),[3,24];case 21:return x.status!==g.default.config.invalidClaimStatusCode?[3,23]:[4,(0,g.onInvalidClaimResponse)(x)];case 22:h.sent(),h.label=23;case 23:throw L;case 24:return[3,26];case 25:throw L;case 26:return[3,27];case 27:return[3,4];case 28:throw o}})})},t}();z.default=vn;function Tr(t){return Ee(this,void 0,void 0,function(){var r,e;return Ce(this,function(s){switch(s.label){case 0:return t.headers===void 0&&(t.headers={}),(0,w.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,g.getTokenForHeaderAuth)("access")];case 1:return r=s.sent(),[4,(0,g.getTokenForHeaderAuth)("refresh")];case 2:return e=s.sent(),r!==void 0&&e!==void 0?t.headers.Authorization!==void 0||t.headers.authorization!==void 0?(0,w.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,w.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),t.headers=M(M({},t.headers),{Authorization:"Bearer ".concat(r)}),t.__supertokensAddedAuthHeader=!0):(0,w.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function fn(t){return Ee(this,void 0,void 0,function(){var r,e,s,i,n,a;return Ce(this,function(u){switch(u.label){case 0:return(0,w.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),r=t.headers["st-refresh-token"],r===void 0?[3,2]:((0,w.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,g.setToken)("refresh",r)]);case 1:u.sent(),u.label=2;case 2:return e=t.headers["st-access-token"],e===void 0?[3,4]:((0,w.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,g.setToken)("access",e)]);case 3:u.sent(),u.label=4;case 4:return s=t.headers["front-token"],s===void 0?[3,6]:((0,w.logDebugMessage)("doRequest: Setting sFrontToken: "+s),[4,g.FrontToken.setItem(s)]);case 5:u.sent(),i=new Headers,Object.entries(t.headers).forEach(function(l){var o=l[0],c=l[1];Array.isArray(c)?c.forEach(function(d){return i.append(o,d)}):i.append(o,c)}),(0,g.updateClockSkewUsingFrontToken)({frontToken:s,responseHeaders:i}),u.label=6;case 6:return n=t.headers["anti-csrf"],n===void 0?[3,9]:[4,(0,g.getLocalSessionState)(!1)];case 7:return a=u.sent(),a.status!=="EXISTS"?[3,9]:((0,w.logDebugMessage)("doRequest: Setting anti-csrf token"),[4,g.AntiCsrfToken.setItem(a.lastAccessTokenUpdate,n)]);case 8:u.sent(),u.label=9;case 9:return[2]}})})}function Sr(t){return Ee(this,void 0,void 0,function(){var r,e,s,i;return Ce(this,function(n){switch(n.label){case 0:return[4,(0,g.getTokenForHeaderAuth)("access")];case 1:return r=n.sent(),[4,(0,g.getTokenForHeaderAuth)("refresh")];case 2:return e=n.sent(),s=t.headers.Authorization||t.headers.authorization,r!==void 0&&e!==void 0&&(s==="Bearer ".concat(r)||"__supertokensAddedAuthHeader"in t)?((0,w.logDebugMessage)("removeAuthHeaderIfMatchesLocalToken: Removing Authorization from user provided headers because it contains our access token"),i=M(M({},t),{headers:M({},t.headers)}),delete i.headers.authorization,delete i.headers.Authorization,[2,i]):[2,t]}})})}});var kr=y(Ue=>{"use strict";var fi=Ue&&Ue.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s[n]=i[n])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function s(){this.constructor=r}r.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.STGeneralError=void 0;var hi=function(t){fi(r,t);function r(e){var s=t.call(this,e)||this;return s.isSuperTokensGeneralError=!0,s}return r.isThisError=function(e){return e.isSuperTokensGeneralError===!0},r}(Error);Ue.STGeneralError=hi});var Ir=y(ye=>{"use strict";var Ae=ye&&ye.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},_e=ye&&ye.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(ye,"__esModule",{value:!0});ye.addInterceptorsToXMLHttpRequest=void 0;var D=Fe(),I=Le(),gi=ce(),bt=dt(),vi=["readystatechange","abort","error","load","loadend","loadstart","progress","timeout"];function mi(){var t=new Promise(function(e){return setTimeout(e,0)}),r=XMLHttpRequest;(0,I.logDebugMessage)("addInterceptorsToXMLHttpRequest called"),XMLHttpRequest=function(){var e=new r,s=this,i=[],n=[],a={},u,l=new Map,o=t;function c(h){o=o.finally(function(){var m;return(m=h())===null||m===void 0?void 0:m.catch(function(_){var S=new ProgressEvent("error");S.error=_,s.onerror!==void 0&&s.onerror!==null&&s.onerror(S),T("error",S)})})}var d="",p=!1,R=void 0,v,N=0;s.onload=null,s.onreadystatechange=null,s.onloadend=null,s.addEventListener=function(h,m,_){var S=l.get(h);S===void 0&&(S=new Set,l.set(h,S)),S.add(m)},s.removeEventListener=function(h,m){var _=l.get(h);_===void 0&&(_=new Set,l.set(h,_)),_.delete(m)};function T(h,m){var _=l.get(h);(0,I.logDebugMessage)("XHRInterceptor dispatching ".concat(m.type," to ").concat(_?_.size:0," listeners")),_&&Array.from(_).forEach(function(S){return S.apply(s,[m])})}function L(){return Ae(this,void 0,void 0,function(){var h,m,_;return _e(this,function(S){switch(S.label){case 0:if(R===void 0)throw new Error("Should never come here..");if((0,I.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: preRequestLSS "+R.status),N>=D.default.config.maxRetryAttemptsForSessionRefresh)throw(0,I.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(N,", maxRetryAttemptsForSessionRefresh: ").concat(D.default.config.maxRetryAttemptsForSessionRefresh)),a.status=0,a.statusText="",a.responseType="",h="Received a 401 response from ".concat(d,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(D.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(h),new Error(h);return[4,(0,D.onUnauthorisedResponse)(R)];case 1:if(m=S.sent(),N++,(0,I.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: sessionRefreshAttempts: "+N),m.result!=="RETRY"){if((0,I.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Not retrying original request "+!!m.error),m.error!==void 0)throw m.error;return[2,!0]}return(0,I.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Retrying original request"),_=new r,H(s,_,!0),i.forEach(function(q){q(_)}),ue(_,v),[2,!1]}})})}function x(h){return Ae(this,void 0,void 0,function(){var m,_,S,q,G;return _e(this,function(j){switch(j.label){case 0:if(p)return(0,I.logDebugMessage)("XHRInterceptor.handleResponse: Returning without interception"),[2,!0];j.label=1;case 1:return j.trys.push([1,7,,11]),(0,I.logDebugMessage)("XHRInterceptor.handleResponse: Interception started"),bt.ProcessState.getInstance().addState(bt.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),m=h.status,_=Si(h),[4,Ti(_)];case 2:return j.sent(),(0,D.fireSessionUpdateEventsIfNecessary)(R.status==="EXISTS",m,_.get("front-token")),m!==D.default.config.sessionExpiredStatusCode?[3,4]:((0,I.logDebugMessage)("responseInterceptor: Status code is: "+m),[4,L()]);case 3:return[2,j.sent()];case 4:return m!==D.default.config.invalidClaimStatusCode?[3,6]:[4,(0,D.onInvalidClaimResponse)({data:h.responseText})];case 5:j.sent(),j.label=6;case 6:return[2,!0];case 7:return S=j.sent(),(0,I.logDebugMessage)("XHRInterceptor.handleResponse: caught error"),S.status===void 0?[3,9]:[4,pi(S)];case 8:if(q=j.sent(),a.status=q.status,a.statusText=q.statusText,a.responseType=q.responseType,u=q.headers,q.responseType==="json")try{a.response=JSON.parse(q.responseText)}catch{a.response=q.responseText}else a.response=q.responseText;return a.responseText=q.responseText,[3,10];case 9:G=new ProgressEvent("error"),G.error=S,s.onerror!==void 0&&s.onerror!==null&&s.onerror(G),T("error",G),j.label=10;case 10:return[2,!0];case 11:return[2]}})})}s.open=function(h,m){(0,I.logDebugMessage)("XHRInterceptor.open called");var _=arguments;d=m;try{p=typeof d=="string"&&!D.default.recipeImpl.shouldDoInterceptionBasedOnUrl(d,D.default.config.apiDomain,D.default.config.sessionTokenBackendDomain)||typeof d!="string"&&!D.default.recipeImpl.shouldDoInterceptionBasedOnUrl(d.toString(),D.default.config.apiDomain,D.default.config.sessionTokenBackendDomain)}catch(S){if(S.message==="Please provide a valid domain name")(0,I.logDebugMessage)("XHRInterceptor.open: Trying shouldDoInterceptionBasedOnUrl with location.origin"),p=!D.default.recipeImpl.shouldDoInterceptionBasedOnUrl(gi.default.getReferenceOrThrow().windowHandler.location.getOrigin(),D.default.config.apiDomain,D.default.config.sessionTokenBackendDomain);else throw S}c(function(){i.push(function(S){S.open.apply(S,_)}),e.open.apply(e,_)})},s.send=function(h){v=h,ue(e,v)},s.setRequestHeader=function(h,m){var _=this;if((0,I.logDebugMessage)("XHRInterceptor.setRequestHeader: Called with ".concat(h)),p){c(function(){return e.setRequestHeader(h,m)});return}h!=="anti-csrf"&&c(function(){return Ae(_,void 0,void 0,function(){var S,q;return _e(this,function(G){switch(G.label){case 0:return h.toLowerCase()!=="authorization"?[3,3]:((0,I.logDebugMessage)("XHRInterceptor.setRequestHeader: checking if user provided auth header matches local token"),[4,(0,D.getTokenForHeaderAuth)("access")]);case 1:return S=G.sent(),[4,(0,D.getTokenForHeaderAuth)("refresh")];case 2:if(q=G.sent(),S!==void 0&&q!==void 0&&m==="Bearer ".concat(S))return(0,I.logDebugMessage)("XHRInterceptor.setRequestHeader: skipping Authorization from user provided headers because it contains our access token"),[2];G.label=3;case 3:return i.push(function(j){j.setRequestHeader(h,m)}),n.push({name:h,value:m}),e.setRequestHeader(h,m),[2]}})})})};var X=void 0;H(s,e,!1);function H(h,m,_){var S,q=["load","loadend","readystatechange"];(0,I.logDebugMessage)("XHRInterceptor.setUpXHR called");for(var G=function(b){(0,I.logDebugMessage)("XHRInterceptor added listener for event ".concat(b)),m.addEventListener(b,function(W){(0,I.logDebugMessage)("XHRInterceptor got event ".concat(b)),q.includes(b)||T(b,W)})},j=0,xt=vi;j<xt.length;j++){var Yr=xt[j];G(Yr)}if(m.onload=function(b){S===void 0&&(S=x(m)),S.then(function(W){W&&(h.onload&&h.onload(b),T("load",b))})},m.onreadystatechange=function(b){m.readyState===r.DONE?(S===void 0&&(S=x(m)),S.then(function(W){W&&(h.onreadystatechange&&h.onreadystatechange(b),T("readystatechange",b))})):(h.onreadystatechange&&h.onreadystatechange(b),T("readystatechange",b))},m.onloadend=function(b){S===void 0&&(S=x(m)),S.then(function(W){W&&(h.onloadend&&h.onloadend(b),T("loadend",b))})},h.getAllResponseHeaders=function(){var b;return u?(b="",u.forEach(function(W,De){return b+="".concat(De,": ").concat(W,`\r
`)})):b=m.getAllResponseHeaders(),b+`x-supertokens-xhr-intercepted: true\r
`},h.getResponseHeader=function(b){return b==="x-supertokens-xhr-intercepted"?"true":u?u.get(b):m.getResponseHeader(b)},X===void 0){X=[];for(var it in m)it in h||X.push(it)}for(var Kr=function(b){typeof m[b]=="function"?Object.defineProperty(h,b,{configurable:!0,value:function(){var W=arguments;return _||i.push(function(De){De[b].apply(De,W)}),m[b].apply(m,W)}}):Object.defineProperty(h,b,{configurable:!0,get:function(){return a[b]!==void 0?a[b]:m[b]},set:function(W){_||i.push(function(De){De[b]=W}),(0,I.logDebugMessage)("XHRInterceptor.set[".concat(b,"] = ").concat(W)),m[b]=W}})},Ht=0,bn=X;Ht<bn.length;Ht++){var it=bn[Ht];Kr(it)}}function ue(h,m){var _=this;if((0,I.logDebugMessage)("XHRInterceptor.send: called"),(0,I.logDebugMessage)("XHRInterceptor.send: Value of doNotDoInterception: "+p),p){(0,I.logDebugMessage)("XHRInterceptor.send: Returning without interception"),c(function(){return h.send(m)});return}(0,I.logDebugMessage)("XHRInterceptor.send: Interception started"),bt.ProcessState.getInstance().addState(bt.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),c(function(){return Ae(_,void 0,void 0,function(){var S,q;return _e(this,function(G){switch(G.label){case 0:return[4,(0,D.getLocalSessionState)(!0)];case 1:return R=G.sent(),R.status!=="EXISTS"?[3,3]:[4,D.AntiCsrfToken.getToken(R.lastAccessTokenUpdate)];case 2:S=G.sent(),S!==void 0&&((0,I.logDebugMessage)("XHRInterceptor.send: Adding anti-csrf token to request"),h.setRequestHeader("anti-csrf",S)),G.label=3;case 3:return D.default.config.autoAddCredentials&&((0,I.logDebugMessage)("XHRInterceptor.send: Adding credentials include"),s.withCredentials=!0),n.some(function(j){return j.name==="rid"})?(0,I.logDebugMessage)("XHRInterceptor.send: rid header was already there in request"):((0,I.logDebugMessage)("XHRInterceptor.send: Adding rid header: anti-csrf"),h.setRequestHeader("rid","anti-csrf")),q=D.default.config.tokenTransferMethod,n.some(function(j){return j.name==="st-auth-mode"})?(0,I.logDebugMessage)("XHRInterceptor.send: st-auth-mode header was already there in request"):((0,I.logDebugMessage)("XHRInterceptor.send: Adding st-auth-mode header: "+q),h.setRequestHeader("st-auth-mode",q)),[4,wi(h,n)];case 4:return G.sent(),(0,I.logDebugMessage)("XHRInterceptor.send: Making user's http call"),[2,h.send(m)]}})})})}},XMLHttpRequest.__interceptedBySuperTokens=!0,XMLHttpRequest.__original=r}ye.addInterceptorsToXMLHttpRequest=mi;function pi(t){return Ae(this,void 0,void 0,function(){var r,e,s,i,n,a;return _e(this,function(u){switch(u.label){case 0:if(r=t.headers.get("content-type"),e="",s="text",r!==null)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.text()];case 2:return e=u.sent(),[3,4];case 3:return i=u.sent(),e="",[3,4];case 4:return[3,9];case 5:return r.includes("application/json")?(s="json",a=(n=JSON).stringify,[4,t.json()]):[3,7];case 6:return e=a.apply(n,[u.sent()]),[3,9];case 7:return r.includes("text/")?[4,t.text()]:[3,9];case 8:e=u.sent(),u.label=9;case 9:return[2,{status:t.status,responseText:e,statusText:t.statusText,responseType:s,headers:t.headers}]}})})}function wi(t,r){return Ae(this,void 0,void 0,function(){var e,s;return _e(this,function(i){switch(i.label){case 0:return(0,I.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,D.getTokenForHeaderAuth)("access")];case 1:return e=i.sent(),[4,(0,D.getTokenForHeaderAuth)("refresh")];case 2:return s=i.sent(),e!==void 0&&s!==void 0?r.some(function(n){var a=n.name;return a.toLowerCase()==="authorization"})?(0,I.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):e!==void 0&&((0,I.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),t.setRequestHeader("Authorization","Bearer ".concat(e))):(0,I.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function Ti(t){return Ae(this,void 0,void 0,function(){var r,e,s,i,n;return _e(this,function(a){switch(a.label){case 0:return(0,I.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),r=t.get("st-refresh-token"),r===null?[3,2]:((0,I.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,D.setToken)("refresh",r)]);case 1:a.sent(),a.label=2;case 2:return e=t.get("st-access-token"),e===null?[3,4]:((0,I.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,D.setToken)("access",e)]);case 3:a.sent(),a.label=4;case 4:return s=t.get("front-token"),s===null?[3,6]:((0,I.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+s),[4,D.FrontToken.setItem(s)]);case 5:a.sent(),(0,D.updateClockSkewUsingFrontToken)({frontToken:s,responseHeaders:t}),a.label=6;case 6:return i=t.get("anti-csrf"),i===null?[3,9]:[4,(0,D.getLocalSessionState)(!1)];case 7:return n=a.sent(),n.status!=="EXISTS"?[3,9]:((0,I.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,D.AntiCsrfToken.setItem(n.lastAccessTokenUpdate,i)]);case 8:a.sent(),a.label=9;case 9:return[2]}})})}function Si(t){return new Headers(t.getAllResponseHeaders().split(`\r
`).map(function(r){var e=r.indexOf(": ");return e===-1?["",""]:[r.slice(0,e),r.slice(e+2)]}).filter(function(r){return r[0].length!==0}))}});var Er=y(de=>{"use strict";var pn=de&&de.__assign||function(){return pn=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},pn.apply(this,arguments)},ke=de&&de.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},Ie=de&&de.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(de,"__esModule",{value:!0});var le=Fe(),Rt=yr(),yi=ft(),O=Le(),ki=kr(),Ii=Ir(),Et=lt(),br=xe(),bi=gt(),mn=100,Rr="CLAIM_REFRESH_LOCK";function Ri(t){return{addXMLHttpRequestInterceptor:function(r){(0,O.logDebugMessage)("addXMLHttpRequestInterceptorAndReturnModified: called"),(0,Ii.addInterceptorsToXMLHttpRequest)()},addFetchInterceptorsAndReturnModifiedFetch:function(r){return(0,O.logDebugMessage)("addFetchInterceptorsAndReturnModifiedFetch: called"),function(e,s){return ke(this,void 0,void 0,function(){return Ie(this,function(i){switch(i.label){case 0:return[4,le.default.doRequest(function(n){return r.originalFetch(typeof e=="object"&&"clone"in e?e.clone():e,pn({},n))},s,e)];case 1:return[2,i.sent()]}})})}},addAxiosInterceptors:function(r){if((0,O.logDebugMessage)("addAxiosInterceptors: called"),XMLHttpRequest.__interceptedBySuperTokens){console.warn("Not adding axios interceptor since XMLHttpRequest is already added. This is just a warning."),console.warn("Our axios and XMLHttpRequest interceptors cannot be used at the same time."),console.warn("Since XMLHttpRequest is added automatically and supports axios by default, you can just remove addAxiosInterceptors from your code."),console.warn("If you want to continue using our axios interceptor, you can override addXMLHttpRequestInterceptor with an empty function."),(0,O.logDebugMessage)("addAxiosInterceptors: not adding, because XHR interceptors are already in place");return}for(var e=r.axiosInstance.interceptors.request,s=0;s<e.handlers.length;s++)if(e.handlers[s].fulfilled===Rt.interceptorFunctionRequestFulfilled){(0,O.logDebugMessage)("addAxiosInterceptors: not adding because already added on this instance");return}r.axiosInstance.interceptors.request.use(Rt.interceptorFunctionRequestFulfilled,function(i){return ke(this,void 0,void 0,function(){return Ie(this,function(n){throw i})})}),r.axiosInstance.interceptors.response.use((0,Rt.responseInterceptor)(r.axiosInstance),(0,Rt.responseErrorInterceptor)(r.axiosInstance))},getUserId:function(r){return ke(this,void 0,void 0,function(){var e;return Ie(this,function(s){switch(s.label){case 0:return(0,O.logDebugMessage)("getUserId: called"),[4,le.FrontToken.getTokenInfo()];case 1:if(e=s.sent(),e===void 0)throw new Error("No session exists");return(0,O.logDebugMessage)("getUserId: returning: "+e.uid),[2,e.uid]}})})},getAccessTokenPayloadSecurely:function(r){return ke(this,void 0,void 0,function(){var e,s;return Ie(this,function(i){switch(i.label){case 0:return(0,O.logDebugMessage)("getAccessTokenPayloadSecurely: called"),[4,le.FrontToken.getTokenInfo()];case 1:if(e=i.sent(),e===void 0)throw new Error("No session exists");return e.ate<br.default.getReferenceOrThrow().dateProvider.now()?((0,O.logDebugMessage)("getAccessTokenPayloadSecurely: access token expired. Refreshing session"),[4,le.default.attemptRefreshingSession()]):[3,5];case 2:return s=i.sent(),s?[4,this.getAccessTokenPayloadSecurely({userContext:r.userContext})]:[3,4];case 3:return[2,i.sent()];case 4:throw new Error("Could not refresh session");case 5:return(0,O.logDebugMessage)("getAccessTokenPayloadSecurely: returning: "+JSON.stringify(e.up)),[2,e.up]}})})},doesSessionExist:function(r){return ke(this,void 0,void 0,function(){var e,s,i;return Ie(this,function(n){switch(n.label){case 0:return(0,O.logDebugMessage)("doesSessionExist: called"),[4,le.FrontToken.getTokenInfo()];case 1:return e=n.sent(),e===void 0?((0,O.logDebugMessage)("doesSessionExist: access token does not exist locally"),[2,!1]):e.ate<br.default.getReferenceOrThrow().dateProvider.now()?((0,O.logDebugMessage)("doesSessionExist: access token expired. Refreshing session"),[4,(0,le.getLocalSessionState)(!1)]):[3,4];case 2:return s=n.sent(),[4,(0,le.onUnauthorisedResponse)(s)];case 3:return i=n.sent(),[2,i.result==="RETRY"];case 4:return[2,!0]}})})},signOut:function(r){return ke(this,void 0,void 0,function(){var e,s,i,n;return Ie(this,function(a){switch(a.label){case 0:return(0,O.logDebugMessage)("signOut: called"),[4,this.doesSessionExist(r)];case 1:return a.sent()?((0,O.logDebugMessage)("signOut: Calling refresh pre API hook"),[4,t.preAPIHook({action:"SIGN_OUT",requestInit:{method:"post",headers:{"fdi-version":yi.supported_fdi.join(","),rid:le.default.rid}},url:le.default.signOutUrl,userContext:r.userContext})]):((0,O.logDebugMessage)("signOut: exiting early because session does not exist"),(0,O.logDebugMessage)("signOut: firing SIGN_OUT event"),t.onHandleEvent({action:"SIGN_OUT",userContext:r.userContext}),[2]);case 2:return e=a.sent(),(0,O.logDebugMessage)("signOut: Calling API"),[4,fetch(e.url,e.requestInit)];case 3:if(s=a.sent(),(0,O.logDebugMessage)("signOut: API ended"),(0,O.logDebugMessage)("signOut: API responded with status code: "+s.status),s.status===t.sessionExpiredStatusCode)return[2];if(s.status>=300)throw s;return[4,t.postAPIHook({action:"SIGN_OUT",requestInit:e.requestInit,url:e.url,fetchResponse:s.clone(),userContext:r.userContext})];case 4:return a.sent(),[4,s.clone().json()];case 5:if(i=a.sent(),i.status==="GENERAL_ERROR")throw(0,O.logDebugMessage)("doRequest: Throwing general error"),n=i.message===void 0?"No Error Message Provided":i.message,new ki.STGeneralError(n);return[2]}})})},getInvalidClaimsFromResponse:function(r){return ke(this,void 0,void 0,function(){var e;return Ie(this,function(s){switch(s.label){case 0:return"body"in r.response?[4,r.response.clone().json()]:[3,2];case 1:return e=s.sent(),[3,3];case 2:typeof r.response.data=="string"?e=JSON.parse(r.response.data):e=r.response.data,s.label=3;case 3:return[2,e.claimValidationErrors]}})})},getGlobalClaimValidators:function(r){return r.claimValidatorsAddedByOtherRecipes},validateClaims:function(r){return ke(this,void 0,void 0,function(){var e,s,i,n,a,u,p,l,o,c,d,p,R;return Ie(this,function(v){switch(v.label){case 0:s=0,v.label=1;case 1:return++s<mn?[4,bi.default.getReferenceOrThrow().lockFactory()]:[3,20];case 2:return i=v.sent(),(0,O.logDebugMessage)("validateClaims: trying to acquire claim refresh lock"),[4,i.acquireLock(Rr)];case 3:if(n=v.sent(),!n)return[3,18];v.label=4;case 4:return v.trys.push([4,,15,17]),[4,this.getAccessTokenPayloadSecurely({userContext:r.userContext})];case 5:e=v.sent(),(0,O.logDebugMessage)("validateClaims: claim refresh lock acquired"),a=0,u=r.claimValidators,v.label=6;case 6:return a<u.length?(p=u[a],[4,p.shouldRefresh(e,r.userContext)]):[3,14];case 7:if(!v.sent())return[3,13];v.label=8;case 8:return v.trys.push([8,10,,11]),[4,p.refresh(r.userContext)];case 9:return v.sent(),[3,11];case 10:return l=v.sent(),console.error("Encountered an error while refreshing validator ".concat(p.id),l),[3,11];case 11:return[4,this.getAccessTokenPayloadSecurely({userContext:r.userContext})];case 12:e=v.sent(),v.label=13;case 13:return a++,[3,6];case 14:return[3,17];case 15:return(0,O.logDebugMessage)("validateClaims: releasing claim refresh lock"),[4,i.releaseLock(Rr)];case 16:return v.sent(),[7];case 17:return[3,20];case 18:(0,O.logDebugMessage)("validateClaims: Retrying refresh lock ".concat(s,"/").concat(mn)),v.label=19;case 19:return[3,1];case 20:return s!==mn?[3,22]:((0,O.logDebugMessage)("validateClaims: ran out of retries while trying to acquire claim refresh lock"),[4,this.getAccessTokenPayloadSecurely({userContext:r.userContext})]);case 21:e=v.sent(),v.label=22;case 22:o=[],c=0,d=r.claimValidators,v.label=23;case 23:return c<d.length?(p=d[c],[4,p.validate(e,r.userContext)]):[3,26];case 24:R=v.sent(),R.isValid||o.push({id:p.id,reason:R.reason}),v.label=25;case 25:return c++,[3,23];case 26:return[2,o]}})})},shouldDoInterceptionBasedOnUrl:function(r,e,s){if((0,O.logDebugMessage)("shouldDoInterceptionBasedOnUrl: toCheckUrl: "+r+" apiDomain: "+e+" sessionTokenBackendDomain: "+s),r.includes("superTokensDoNotDoInterception"))return!1;r=(0,Et.normaliseURLDomainOrThrowError)(r);var i=new URL(r),n=i.hostname,a=!1;if(e!==""){e=(0,Et.normaliseURLDomainOrThrowError)(e);var u=new URL(e);a=n===u.hostname}if(s===void 0||a)return a;var l=(0,Et.normaliseSessionScopeOrThrowError)(s);return(0,Et.matchesDomainOrSubdomain)(n,l)},calculateClockSkewInMillis:function(r){var e=r.accessTokenPayload;(0,O.logDebugMessage)("calculateClockSkewInMillis: called");var s=e==null?void 0:e.iat;if(s===void 0||typeof s!="number")return(0,O.logDebugMessage)("calculateClockSkewInMillis: payload iat is undefined or not a number. This may happen due to an unsupported backend sdk. Returning 0"),0;var i=s*1e3,n=i-Date.now();return(0,O.logDebugMessage)("calculateClockSkewInMillis: returning "+n),n}}}de.default=Ri});var Cr=y(qe=>{"use strict";var Ct=qe&&qe.__assign||function(){return Ct=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ct.apply(this,arguments)};Object.defineProperty(qe,"__esModule",{value:!0});qe.getProxyObject=void 0;function Ei(t){for(var r=Ct(Ct({},t),{_call:function(u,l){throw new Error("This function should only be called through the recipe object")}}),e=Object.keys(r),s=function(u){u!=="_call"&&(r[u]=function(){for(var l=[],o=0;o<arguments.length;o++)l[o]=arguments[o];return this._call(u,l)})},i=0,n=e;i<n.length;i++){var a=n[i];s(a)}return r}qe.getProxyObject=Ei});var _r=y(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.OverrideableBuilder=void 0;var Ci=Cr(),Ar=function(){function t(r){this.layers=[r],this.proxies=[]}return t.prototype.override=function(r){for(var e=(0,Ci.getProxyObject)(this.layers[0]),s=r(e,this),i=0,n=Object.keys(this.layers[0]);i<n.length;i++){var a=n[i];s[a]===e[a]||a==="_call"?delete s[a]:s[a]===void 0&&(s[a]=null)}return this.layers.push(s),this.proxies.push(e),this},t.prototype.build=function(){var r=this;if(this.result)return this.result;this.result={};for(var e=0,s=this.layers;e<s.length;e++)for(var i=s[e],n=0,a=Object.keys(i);n<a.length;n++){var u=a[n],l=i[u];l!==void 0&&(l===null?this.result[u]=void 0:typeof l=="function"?this.result[u]=l.bind(this.result):this.result[u]=l)}for(var o=function(p){var R=c.proxies[p];R._call=function(v,N){for(var T=p;T>=0;--T){var L=r.layers[T][v];if(L!=null)return L.bind(r.result).apply(void 0,N)}}},c=this,d=0;d<this.proxies.length;++d)o(d);return this.result},t}();Ze.OverrideableBuilder=Ar;Ze.default=Ar});var wn=y(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.PrimitiveClaim=void 0;var Ai=xe(),_i=function(){function t(r){var e=this;this.validators={hasValue:function(s,i,n){i===void 0&&(i=e.defaultMaxAgeInSeconds);var a=Ai.default.getReferenceOrThrow().dateProvider;return{id:n!==void 0?n:e.id,refresh:function(u){return e.refresh(u)},shouldRefresh:function(u,l){if(i!==void 0&&i<a.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(a.getThresholdInSeconds()));return e.getValueFromPayload(u,l)===void 0||i!==void 0&&u[e.id].t<a.now()-i*1e3},validate:function(u,l){var o=e.getValueFromPayload(u,l);if(o===void 0)return{isValid:!1,reason:{message:"value does not exist",expectedValue:s,actualValue:o}};var c=(a.now()-e.getLastFetchedTime(u,l))/1e3;return i!==void 0&&c>i?{isValid:!1,reason:{message:"expired",ageInSeconds:c,maxAgeInSeconds:i}}:o!==s?{isValid:!1,reason:{message:"wrong value",expectedValue:s,actualValue:o}}:{isValid:!0}}}}},this.id=r.id,this.refresh=r.refresh,this.defaultMaxAgeInSeconds=r.defaultMaxAgeInSeconds}return t.prototype.getValueFromPayload=function(r,e){return r[this.id]!==void 0?r[this.id].v:void 0},t.prototype.getLastFetchedTime=function(r,e){return r[this.id]!==void 0?r[this.id].t:void 0},t}();At.PrimitiveClaim=_i});var Dr=y(be=>{"use strict";var et=be&&be.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},tt=be&&be.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(be,"__esModule",{value:!0});be.PrimitiveArrayClaim=void 0;var nt=xe(),Di=function(){function t(r){var e=this;this.validators={includes:function(s,i,n){i===void 0&&(i=e.defaultMaxAgeInSeconds);var a=nt.default.getReferenceOrThrow().dateProvider;return{id:n!==void 0?n:e.id,refresh:function(u){return e.refresh(u)},shouldRefresh:function(u,l){if(i!==void 0&&i<a.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(a.getThresholdInSeconds()));return e.getValueFromPayload(u,l)===void 0||i!==void 0&&u[e.id].t<a.now()-i*1e3},validate:function(u,l){return et(e,void 0,void 0,function(){var o,c;return tt(this,function(d){return o=this.getValueFromPayload(u,l),o===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:s,actualValue:o}}]:(c=(a.now()-this.getLastFetchedTime(u,l))/1e3,i!==void 0&&c>i?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:c,maxAgeInSeconds:i}}]:o.includes(s)?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"wrong value",expectedToInclude:s,actualValue:o}}])})})}}},excludes:function(s,i,n){i===void 0&&(i=e.defaultMaxAgeInSeconds);var a=nt.default.getReferenceOrThrow().dateProvider;return{id:n!==void 0?n:e.id,refresh:function(u){return e.refresh(u)},shouldRefresh:function(u,l){if(i!==void 0&&i<a.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(a.getThresholdInSeconds()));return e.getValueFromPayload(u,l)===void 0||i!==void 0&&u[e.id].t<a.now()-i*1e3},validate:function(u,l){return et(e,void 0,void 0,function(){var o,c;return tt(this,function(d){return o=this.getValueFromPayload(u,l),o===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:s,actualValue:o}}]:(c=(a.now()-this.getLastFetchedTime(u,l))/1e3,i!==void 0&&c>i?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:c,maxAgeInSeconds:i}}]:o.includes(s)?[2,{isValid:!1,reason:{message:"wrong value",expectedToNotInclude:s,actualValue:o}}]:[2,{isValid:!0}])})})}}},includesAll:function(s,i,n){i===void 0&&(i=e.defaultMaxAgeInSeconds);var a=nt.default.getReferenceOrThrow().dateProvider;return{id:n!==void 0?n:e.id,refresh:function(u){return e.refresh(u)},shouldRefresh:function(u,l){if(i!==void 0&&i<a.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(a.getThresholdInSeconds()));return e.getValueFromPayload(u,l)===void 0||i!==void 0&&u[e.id].t<a.now()-i*1e3},validate:function(u,l){return et(e,void 0,void 0,function(){var o,c,d,p;return tt(this,function(R){return o=this.getValueFromPayload(u,l),o===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:s,actualValue:o}}]:(c=(a.now()-this.getLastFetchedTime(u,l))/1e3,i!==void 0&&c>i?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:c,maxAgeInSeconds:i}}]:(d=new Set(o),p=s.every(function(v){return d.has(v)}),[2,p?{isValid:p}:{isValid:p,reason:{message:"wrong value",expectedToInclude:s,actualValue:o}}]))})})}}},includesAny:function(s,i,n){i===void 0&&(i=e.defaultMaxAgeInSeconds);var a=nt.default.getReferenceOrThrow().dateProvider;return{id:n!==void 0?n:e.id,refresh:function(u){return e.refresh(u)},shouldRefresh:function(u,l){if(i!==void 0&&i<a.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(a.getThresholdInSeconds()));return e.getValueFromPayload(u,l)===void 0||i!==void 0&&u[e.id].t<a.now()-i*1e3},validate:function(u,l){return et(e,void 0,void 0,function(){var o,c,d,p;return tt(this,function(R){return o=this.getValueFromPayload(u,l),o===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:s,actualValue:o}}]:(c=(a.now()-this.getLastFetchedTime(u,l))/1e3,i!==void 0&&c>i?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:c,maxAgeInSeconds:i}}]:(d=new Set(o),p=s.some(function(v){return d.has(v)}),[2,p?{isValid:p}:{isValid:p,reason:{message:"wrong value",expectedToIncludeAtLeastOneOf:s,actualValue:o}}]))})})}}},excludesAll:function(s,i,n){i===void 0&&(i=e.defaultMaxAgeInSeconds);var a=nt.default.getReferenceOrThrow().dateProvider;return{id:n!==void 0?n:e.id,refresh:function(u){return e.refresh(u)},shouldRefresh:function(u,l){if(i!==void 0&&i<a.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(a.getThresholdInSeconds()));return e.getValueFromPayload(u,l)===void 0||i!==void 0&&u[e.id].t<a.now()-i*1e3},validate:function(u,l){return et(e,void 0,void 0,function(){var o,c,d,p;return tt(this,function(R){return o=this.getValueFromPayload(u,l),o===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:s,actualValue:o}}]:(c=(a.now()-this.getLastFetchedTime(u,l))/1e3,i!==void 0&&c>i?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:c,maxAgeInSeconds:i}}]:(d=new Set(o),p=s.every(function(v){return!d.has(v)}),[2,p?{isValid:p}:{isValid:p,reason:{message:"wrong value",expectedToNotInclude:s,actualValue:o}}]))})})}}}},this.id=r.id,this.refresh=r.refresh,this.defaultMaxAgeInSeconds=r.defaultMaxAgeInSeconds}return t.prototype.getValueFromPayload=function(r,e){return r[this.id]!==void 0?r[this.id].v:void 0},t.prototype.getLastFetchedTime=function(r,e){return r[this.id]!==void 0?r[this.id].t:void 0},t}();be.PrimitiveArrayClaim=Di});var Or=y(Re=>{"use strict";var Oi=Re&&Re.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s[n]=i[n])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function s(){this.constructor=r}r.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),_t=Re&&Re.__assign||function(){return _t=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_t.apply(this,arguments)};Object.defineProperty(Re,"__esModule",{value:!0});Re.BooleanClaim=void 0;var Mi=wn(),Pi=function(t){Oi(r,t);function r(e){var s=t.call(this,e)||this;return s.validators=_t(_t({},s.validators),{isTrue:function(i){return s.validators.hasValue(!0,i)},isFalse:function(i){return s.validators.hasValue(!1,i)}}),s}return r}(Mi.PrimitiveClaim);Re.BooleanClaim=Pi});var Pr=y(E=>{"use strict";var rt=E&&E.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},st=E&&E.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(E,"__esModule",{value:!0});E.BooleanClaim=E.PrimitiveArrayClaim=E.PrimitiveClaim=E.getInvalidClaimsFromResponse=E.getClaimValue=E.validateClaims=E.signOut=E.addAxiosInterceptors=E.doesSessionExist=E.attemptRefreshingSession=E.getAccessToken=E.getAccessTokenPayloadSecurely=E.getUserId=E.init=void 0;var K=Fe(),Ni=Er(),Li=_r(),J=lt(),xi=Xt(),Mr=ce(),Hi=gt(),Fi=un(),Ui=Le(),qi=xe(),Q=function(){function t(){}t.init=function(e){xi.default.init(e.cookieHandler),Mr.default.init(e.windowHandler),qi.default.init(e.dateProvider),Hi.default.init(e.lockFactory,Mr.default.getReferenceOrThrow().windowHandler.localStorage);var s=(0,J.validateAndNormaliseInputOrThrowError)(e);e.enableDebugLogs!==void 0&&e.enableDebugLogs&&(0,Ui.enableLogging)();var i=new Li.default((0,Ni.default)({onHandleEvent:s.onHandleEvent,preAPIHook:s.preAPIHook,postAPIHook:s.postAPIHook,sessionExpiredStatusCode:s.sessionExpiredStatusCode})).override(s.override.functions).build();K.default.init(s,i),t.axiosInterceptorQueue.forEach(function(n){n()}),t.axiosInterceptorQueue=[]},t.getUserId=function(e){return K.default.recipeImpl.getUserId({userContext:(0,J.getNormalisedUserContext)(e===void 0?void 0:e.userContext)})},t.getAccessTokenPayloadSecurely=function(e){return rt(this,void 0,void 0,function(){return st(this,function(s){return[2,K.default.recipeImpl.getAccessTokenPayloadSecurely({userContext:(0,J.getNormalisedUserContext)(e===void 0?void 0:e.userContext)})]})})};var r;return r=t,t.axiosInterceptorQueue=[],t.attemptRefreshingSession=function(){return rt(void 0,void 0,void 0,function(){return st(r,function(e){return[2,K.default.attemptRefreshingSession()]})})},t.doesSessionExist=function(e){return K.default.recipeImpl.doesSessionExist({userContext:(0,J.getNormalisedUserContext)(e===void 0?void 0:e.userContext)})},t.addAxiosInterceptors=function(e,s){K.default.initCalled?K.default.recipeImpl.addAxiosInterceptors({axiosInstance:e,userContext:(0,J.getNormalisedUserContext)(s)}):t.axiosInterceptorQueue.push(function(){K.default.recipeImpl.addAxiosInterceptors({axiosInstance:e,userContext:(0,J.getNormalisedUserContext)(s)})})},t.signOut=function(e){return K.default.recipeImpl.signOut({userContext:(0,J.getNormalisedUserContext)(e===void 0?void 0:e.userContext)})},t.getInvalidClaimsFromResponse=function(e){return rt(this,void 0,void 0,function(){return st(this,function(s){return[2,K.default.recipeImpl.getInvalidClaimsFromResponse({response:e.response,userContext:(0,J.getNormalisedUserContext)(e.userContext)})]})})},t.getClaimValue=function(e){return rt(this,void 0,void 0,function(){var s,i;return st(this,function(n){switch(n.label){case 0:return s=(0,J.getNormalisedUserContext)(e===void 0?void 0:e.userContext),[4,t.getAccessTokenPayloadSecurely({userContext:s})];case 1:return i=n.sent(),[2,e.claim.getValueFromPayload(i,s)]}})})},t.validateClaims=function(e,s){var i=(0,J.getNormalisedUserContext)(s),n=Fi.SessionClaimValidatorStore.getClaimValidatorsAddedByOtherRecipes(),a=K.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:n,userContext:i}),u=e!==void 0?e(a,i):a;return u.length===0?[]:K.default.recipeImpl.validateClaims({claimValidators:u,userContext:(0,J.getNormalisedUserContext)(s)})},t.getAccessToken=function(e){return rt(void 0,void 0,void 0,function(){return st(r,function(s){switch(s.label){case 0:return[4,K.default.recipeImpl.doesSessionExist({userContext:(0,J.getNormalisedUserContext)(e===void 0?void 0:e.userContext)})];case 1:return s.sent()?[2,(0,K.getTokenForHeaderAuth)("access")]:[2,void 0]}})})},t}();E.default=Q;E.init=Q.init;E.getUserId=Q.getUserId;E.getAccessTokenPayloadSecurely=Q.getAccessTokenPayloadSecurely;E.getAccessToken=Q.getAccessToken;E.attemptRefreshingSession=Q.attemptRefreshingSession;E.doesSessionExist=Q.doesSessionExist;E.addAxiosInterceptors=Q.addAxiosInterceptors;E.signOut=Q.signOut;E.validateClaims=Q.validateClaims;E.getClaimValue=Q.getClaimValue;E.getInvalidClaimsFromResponse=Q.getInvalidClaimsFromResponse;var Vi=wn();Object.defineProperty(E,"PrimitiveClaim",{enumerable:!0,get:function(){return Vi.PrimitiveClaim}});var ji=Dr();Object.defineProperty(E,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return ji.PrimitiveArrayClaim}});var Bi=Or();Object.defineProperty(E,"BooleanClaim",{enumerable:!0,get:function(){return Bi.BooleanClaim}})});var Tn=y(Dt=>{"use strict";function Gi(t){for(var r in t)Dt.hasOwnProperty(r)||(Dt[r]=t[r])}Dt.__esModule=!0;Gi(Pr())});var Nr=y(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.EMAILVERIFICATION_CLAIM_ID=void 0;Ot.EMAILVERIFICATION_CLAIM_ID="st-ev"});var Ur=y(Y=>{"use strict";var Wi=Y&&Y.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s[n]=i[n])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function s(){this.constructor=r}r.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),$=Y&&Y.__assign||function(){return $=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$.apply(this,arguments)},Mt=Y&&Y.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},Pt=Y&&Y.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Lr=Y&&Y.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var s=0,i=r.length,n;s<i;s++)(n||!(s in r))&&(n||(n=Array.prototype.slice.call(r,0,s)),n[s]=r[s]);return t.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(Y,"__esModule",{value:!0});Y.Recipe=void 0;var Xi=pr(),se=Tn(),xr=ln(),zi=Nr(),Hr=[zi.EMAILVERIFICATION_CLAIM_ID],Fr=function(t){Wi(r,t);function r(e){var s=t.call(this,e)||this;return s.getUserId=function(i){return se.default.getUserId({userContext:i.userContext})},s.getAccessToken=function(i){return Mt(s,void 0,void 0,function(){return Pt(this,function(n){return[2,se.default.getAccessToken({userContext:i.userContext})]})})},s.getAccessTokenPayloadSecurely=function(i){return Mt(s,void 0,void 0,function(){return Pt(this,function(n){return[2,se.default.getAccessTokenPayloadSecurely({userContext:i.userContext})]})})},s.doesSessionExist=function(i){return se.default.doesSessionExist({userContext:i.userContext})},s.signOut=function(i){return se.default.signOut({userContext:i.userContext})},s.attemptRefreshingSession=function(){return Mt(s,void 0,void 0,function(){return Pt(this,function(i){return[2,se.default.attemptRefreshingSession()]})})},s.validateClaims=function(i){return se.default.validateClaims(i.overrideGlobalClaimValidators,i.userContext)},se.default.init($($({},e),{override:{functions:function(i,n){var a;return n.override(function(u){return $($({},u),{getGlobalClaimValidators:function(l){var o=u.getGlobalClaimValidators(l);return Lr(Lr([],o.filter(function(c){return Hr.includes(c.id)}),!0),o.filter(function(c){return!Hr.includes(c.id)}),!0)}})}),!((a=e.override)===null||a===void 0)&&a.functions&&n.override(e.override.functions),i}},preAPIHook:function(i){return Mt(s,void 0,void 0,function(){var n,a;return Pt(this,function(u){return n=new Headers(i.requestInit.headers),n.set("rid",e.recipeId),a=$($({},i),{requestInit:$($({},i.requestInit),{headers:n})}),e.preAPIHook===void 0?[2,a]:[2,e.preAPIHook(i)]})})},apiDomain:e.appInfo.apiDomain.getAsStringDangerous(),apiBasePath:e.appInfo.apiBasePath.getAsStringDangerous()})),s}return r.init=function(e){return function(s,i,n){return r.instance=new r($($({},e),{appInfo:s,recipeId:r.RECIPE_ID,enableDebugLogs:n})),r.instance}},r.prototype.getClaimValue=function(e){return se.default.getClaimValue(e)},r.prototype.getInvalidClaimsFromResponse=function(e){return se.default.getInvalidClaimsFromResponse(e)},r.addAxiosInterceptors=function(e,s){return se.default.addAxiosInterceptors(e,s)},r.getInstanceOrThrow=function(){if(r.instance===void 0){var e="No instance of Session found. Ensure that the 'Session.init' method is called within the 'SuperTokens.init' recipeList.";throw e=(0,xr.checkForSSRErrorAndAppendIfNeeded)(e),Error(e)}return r.instance},r.reset=function(){(0,xr.isTest)()&&(r.instance=void 0)},r.RECIPE_ID="session",r}(Xi.default);Y.Recipe=Fr;Y.default=Fr});var jr=y(C=>{"use strict";var qr=C&&C.__awaiter||function(t,r,e,s){function i(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(c){try{o(s.next(c))}catch(d){a(d)}}function l(c){try{o(s.throw(c))}catch(d){a(d)}}function o(c){c.done?n(c.value):i(c.value).then(u,l)}o((s=s.apply(t,r||[])).next())})},Vr=C&&C.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,i,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(c){return l([o,c])}}function l(o){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=r.call(t,e)}catch(c){o=[6,c],i=0}finally{s=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(C,"__esModule",{value:!0});C.getInvalidClaimsFromResponse=C.getClaimValue=C.validateClaims=C.signOut=C.addAxiosInterceptors=C.doesSessionExist=C.attemptRefreshingSession=C.getAccessToken=C.getAccessTokenPayloadSecurely=C.getUserId=C.init=C.BooleanClaim=C.PrimitiveArrayClaim=C.PrimitiveClaim=void 0;var fe=ln(),ie=Ur(),Z=function(){function t(){}return t.init=function(r){return ie.default.init(r)},t.getUserId=function(r){return ie.default.getInstanceOrThrow().getUserId({userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t.getAccessToken=function(r){return ie.default.getInstanceOrThrow().getAccessToken({userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t.getAccessTokenPayloadSecurely=function(r){return qr(this,void 0,void 0,function(){return Vr(this,function(e){return[2,ie.default.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})]})})},t.attemptRefreshingSession=function(){return qr(this,void 0,void 0,function(){return Vr(this,function(r){return[2,ie.default.getInstanceOrThrow().attemptRefreshingSession()]})})},t.doesSessionExist=function(r){return ie.default.getInstanceOrThrow().doesSessionExist({userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t.addAxiosInterceptors=function(r,e){return ie.default.addAxiosInterceptors(r,(0,fe.getNormalisedUserContext)(e))},t.signOut=function(r){return ie.default.getInstanceOrThrow().signOut({userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t.getClaimValue=function(r){return ie.default.getInstanceOrThrow().getClaimValue({claim:r.claim,userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t.validateClaims=function(r){return ie.default.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:r==null?void 0:r.overrideGlobalClaimValidators,userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t.getInvalidClaimsFromResponse=function(r){return ie.default.getInstanceOrThrow().getInvalidClaimsFromResponse({response:r.response,userContext:(0,fe.getNormalisedUserContext)(r==null?void 0:r.userContext)})},t}();C.default=Z;var Yi=Z.init;C.init=Yi;var Ki=Z.getUserId;C.getUserId=Ki;var Ji=Z.getAccessTokenPayloadSecurely;C.getAccessTokenPayloadSecurely=Ji;var Qi=Z.getAccessToken;C.getAccessToken=Qi;var $i=Z.attemptRefreshingSession;C.attemptRefreshingSession=$i;var Zi=Z.doesSessionExist;C.doesSessionExist=Zi;var eo=Z.addAxiosInterceptors;C.addAxiosInterceptors=eo;var to=Z.signOut;C.signOut=to;var no=Z.validateClaims;C.validateClaims=no;var ro=Z.getClaimValue;C.getClaimValue=ro;var so=Z.getInvalidClaimsFromResponse;C.getInvalidClaimsFromResponse=so;var Sn=Tn();Object.defineProperty(C,"PrimitiveClaim",{enumerable:!0,get:function(){return Sn.PrimitiveClaim}});Object.defineProperty(C,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return Sn.PrimitiveArrayClaim}});Object.defineProperty(C,"BooleanClaim",{enumerable:!0,get:function(){return Sn.BooleanClaim}})});var Br=y(Nt=>{"use strict";function io(t){for(var r in t)Nt.hasOwnProperty(r)||(Nt[r]=t[r])}Nt.__esModule=!0;io(jr())});var Gr={SAVE:"Save",LOGIN_PAGE:{TITLE:"Login",USERNAME:"Username",PASSWORD:"Password"},HOME_PAGE:{TITLE:"Welcome!",SCAN_CARDS:{SELF_SCAN:{TITLE:"Self scan",DESCRIPTION:"Based on your answers - 100% free",DATE_LABEL:"Last taken:"},HEALTH_SCAN:{TITLE:"Health scan",DESCRIPTION:"Based on your physical scan & coaching conversation",DATE_LABEL:"Last taken:"}},COMING_SOON:{TITLE:"Coming soon",BLOOD:{TITLE:"Blood",DESCRIPTION:"Coming soon"},DNA:{TITLE:"DNA",DESCRIPTION:"Coming soon"},SLEEP:{TITLE:"Sleep",DESCRIPTION:"Coming soon"}}},TABS:{PLAN:"Plan",SCAN:"Scan",ACT:"Act",CONNECT:"Connect"},SETTINGS_PAGE:{TITLE:"Settings"},SCAN_ACCORDION:{DIFFERENCE_WITH_LAST_SCAN:"Difference with last scan",OVERALL_PROGRESS:"Overall progress",VIEW_FULL_ANALYSIS:"View full analysis",MOVEMENT:"Movement",NUTRITION:"Nutrition",MINDSET:"Mindset",BEWEGING:"Beweging",MOVEMENT_DESCRIPTION:"Your Movement Score is great! You have a very active lifestyle that supports your physical health and vitality very well.",NUTRITION_DESCRIPTION:"Your Nutrition Score shows room for improvement. Focus on balanced meals and consistent healthy eating habits.",MINDSET_DESCRIPTION:"Your Mindset Score is excellent! You maintain a positive mental attitude and good stress management practices."},ONBOARDING_PAGE:{WELCOME_TITLE:"Welcome to Charged",WELCOME_DESCRIPTION_1:"Charged starts with personal insight - in your body, behavior, and daily life. That\u2019s the starting point for real change.",WELCOME_DESCRIPTION_2:"That\u2019s exactly what we\u2019re missing. That\u2019s why we\u2019re building Charged: a system and movement to make healthy habits fun, social, and achievable.",WELCOME_DESCRIPTION_3:"For everyone who wants control and wants to live healthier \u2013 not just when it\u2019s hard, but every day again.",CHANGE_SYSTEM_TITLE:"Together we change the system",CHANGE_SYSTEM_DESCRIPTION_1:"Health is not what you have, but what you do. Every day again, in your own way, but never alone.",CHANGE_SYSTEM_DESCRIPTION_2:"Charged makes healthy behavior accessible for everyone who wants to. And for those who want to go further, we offer in-depth opportunities to go as far and as personal as you choose.",CHANGE_SYSTEM_DESCRIPTION_3:"For everyone who wants control and wants to live healthier \u2013 not just when it\u2019s hard, but every day again.",REVIEW_TITLE:"Review your answers",REVIEW_DESCRIPTION_1:"Charged gave me insight into my behavior \u2013 and how I could change it. No judgment, just structure. Exactly what I needed to keep going.",EMAIL_TITLE:"Enter your email to start your self-scan",EMAIL_DESCRIPTION_1:"We\u2019ll use this to connect your scan results to your account \u2014 or create one for you.",CONTINUE:"Continue",BACK:"Back",SKIP:"Skip",LOGIN:"Login",EMAIL:"Email",START_YOUR_JOURNEY:"Start your journey"}};var Wr={SAVE:"Opslaan",LOGIN_PAGE:{TITLE:"Inloggen",USERNAME:"Gebruikersnaam",PASSWORD:"Wachtwoord"},HOME_PAGE:{TITLE:"Welkom!",SCAN_CARDS:{SELF_SCAN:{TITLE:"Self scan",DESCRIPTION:"Gebaseerd op je antwoorden - 100% gratis",DATE_LABEL:"Laatst genomen:"},HEALTH_SCAN:{TITLE:"Health scan",DESCRIPTION:"Op basis van je fysieke scan & coachgesprek",DATE_LABEL:"Laatst genomen:"}},COMING_SOON:{TITLE:"Binnenkort",BLOOD:{TITLE:"Blood",DESCRIPTION:"Binnenkort"},DNA:{TITLE:"DNA",DESCRIPTION:"Binnenkort"},SLEEP:{TITLE:"Sleep",DESCRIPTION:"Binnenkort"}}},TABS:{PLAN:"Plannen",SCAN:"Scan",ACT:"Actie",CONNECT:"Verbind"},SETTINGS_PAGE:{TITLE:"Instellingen"},SCAN_ACCORDION:{DIFFERENCE_WITH_LAST_SCAN:"Verschil met laatste scan",OVERALL_PROGRESS:"Algehele vooruitgang",VIEW_FULL_ANALYSIS:"Bekijk volledige analyse",MOVEMENT:"Beweging",NUTRITION:"Voeding",MINDSET:"Mindset",BEWEGING:"Beweging",MOVEMENT_DESCRIPTION:"Je Bewegingsscore is geweldig! Je hebt een zeer actieve levensstijl die je fysieke gezondheid en vitaliteit heel goed ondersteunt.",NUTRITION_DESCRIPTION:"Je Voedingsscore laat ruimte voor verbetering zien. Focus op evenwichtige maaltijden en consistente gezonde eetgewoonten.",MINDSET_DESCRIPTION:"Je Mindset-score is uitstekend! Je behoudt een positieve mentale houding en goede stressbeheersing."},ONBOARDING_PAGE:{WELCOME_TITLE:"Welkom bij Charged Tof dat je meedoet.",WELCOME_DESCRIPTION_1:"Charged begint met persoonlijk inzicht - in je lijf, gedrag en dagelijks leven. Dat is het startpunt voor echte verandering.",WELCOME_DESCRIPTION_2:"Juist dat misten we zelf. Daarom bouwen we Charged: een systeem \xE9n beweging om gezonde gewoontes leuk, sociaal en haalbaar te maken.",WELCOME_DESCRIPTION_3:"Voor iedereen die regie wil en gezond(er) wil leven \u2013 niet pas als het misgaat, maar elke dag opnieuw.",CHANGE_SYSTEM_TITLE:"Samen veranderen we het systeem",CHANGE_SYSTEM_DESCRIPTION_1:"Gezondheid is niet wat je hebt, maar wat je doet. Iedere dag opnieuw, op jouw manier, maar nooit alleen.",CHANGE_SYSTEM_DESCRIPTION_2:"Charged maakt gezond gedrag toegankelijk voor iedereen die wil. En voor wie verder wil, bieden we verdiepende mogelijkheden om zo ver en persoonlijk te gaan als jij zelf kiest. ",REVIEW_TITLE:"Bekijk je antwoorden",REVIEW_DESCRIPTION_1:"Charged gaf me eindelijk inzicht in mijn gedrag \u2013 en hoe ik het kon veranderen. Geen oordeel, w\xE9l structuur. Precies wat ik nodig had om vol te houden.",EMAIL_TITLE:"Voer je email in",EMAIL_DESCRIPTION_1:"We gebruiken je email om je te helpen gewoonten op te bouwen die echt blijven hangen.",CONTINUE:"Doorgaan",SCAN_TRACKERS_STICK_TO_HABIT:"Scan-deelnemers houden zich vaker aan hun gewoonten.",BACK:"Terug",SKIP:"Overslaan",LOGIN:"Inloggen",EMAIL:"Email",START_YOUR_JOURNEY:"Begin je reis"}};var yn={en:Gr,nl:Wr};var oo=(()=>{let r=class r{constructor(){this.LANG_KEY="lang",this.defaultLang="en",this.languageOptions=[{code:"en",label:"English"},{code:"nl",label:"Nederlands"}],this.translate=ge(Dn)}init(){this.registerTranslations();let s=localStorage.getItem(this.LANG_KEY),i=navigator.language.split("-")[0],n=this.resolveLanguage(s||i);this.setActiveLanguage(n)}setActiveLanguage(s){this.translate.use(s),localStorage.setItem(this.LANG_KEY,s)}getActiveLanguage(){return this.translate.currentLang||this.defaultLang}getAvailableLanguages(){return this.languageOptions}resolveLanguage(s){return this.languageOptions.some(i=>i.code===s)?s:this.defaultLang}registerTranslations(){Object.keys(yn).forEach(s=>{this.translate.setTranslation(s,yn[s],!0)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Xr=Jr(Br());var In=(()=>{let r=class r{constructor(){this._user=Cn(null),this.user=this._user.asReadonly(),this.userRole=An(()=>{var s,i;return(i=(s=this._user())==null?void 0:s.role)!=null?i:null}),this.router=ge(at),this.http=ge(ot)}loadUserFromSession(){return Oe(this,null,function*(){if(!(yield Xr.default.doesSessionExist()))return null;let i={role:"user",username:"devan"};return Promise.resolve(i);try{return yield Rn(this.http.get("https://charged-app.onrender.com/user/sessioninfo",{withCredentials:!0}))}catch(n){return console.error("Error loading session user:",n),null}})}setUser(s){this._user.set(s)}logout(){this._user.set(null),this.router.navigateByUrl("/login")}hasRole(s){let i=this.userRole();return!!i&&s.includes(i)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Lt={production:!0,backendBaseUrl:"/",typeform:{token:""}};var zr={feedback:{id:"mibqokVS",typeformToken:Lt.typeform.token}};var ao=(()=>{let r=class r{constructor(s){this.http=s,this.API_BASE="https://api.typeform.com",this.ACCESS_TOKEN=zr.feedback.typeformToken,this.BACKEND_BASE=Lt.backendBaseUrl}getHeaders(){return new _n({Authorization:`Bearer ${this.ACCESS_TOKEN}`,"Content-Type":"application/json"})}getFormDetails(s){return this.http.get(`${this.API_BASE}/forms/${s}`,{headers:this.getHeaders()})}getFormResponses(s){return this.http.get(`${this.API_BASE}/forms/${s}/responses`,{headers:this.getHeaders()})}getSubmittedResponse(s){return this.http.get(`${this.BACKEND_BASE}/form-response/${s}`)}};r.\u0275fac=function(i){return new(i||r)(En(ot))},r.\u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var uo=(()=>{let r=class r{constructor(){this.DISABLED_COLOR="#e0e0e0",this.DEFAULT_BACKGROUND="#f5f5f5",this.COLOR_RANGES=[{maxValue:39,background:"#ffebee",progress:"#d32f2f"},{maxValue:59,background:"#fff8e1",progress:"#f57c00"},{maxValue:74,background:"#e3f2fd",progress:"#1976d2"},{maxValue:89,background:"#e8f5e9",progress:"#689f38"},{maxValue:100,background:"#e8f5e9",progress:"#2e7d32"}]}getColors(s,i=!1){var a;if(i)return{background:this.DISABLED_COLOR,progress:this.DISABLED_COLOR};let n=(a=this.COLOR_RANGES.find(u=>s<=u.maxValue))!=null?a:this.COLOR_RANGES[this.COLOR_RANGES.length-1];return{background:n.background,progress:n.progress}}getGenericBackground(s=!1){return s?"#fafafa":this.DEFAULT_BACKGROUND}getCustomColors(s,i,n=!1){let a=this.getColors(s,n);return{background:i!=null?i:a.background,progress:a.progress}}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var co=(t,r)=>Oe(null,null,function*(){return!0});var lo=()=>Oe(null,null,function*(){let t=ge(In),r=ge(at);if(!t.user()){let s=yield t.loadUserFromSession();t.setUser(s)}return t.user()?(t.userRole()==="admin"?r.navigateByUrl("/admin"):r.navigateByUrl("/tabs/home"),!1):!0});export{Nn as a,Fn as b,Xt as c,xe as d,ln as e,_r as f,kr as g,pr as h,Ur as i,Br as j,oo as k,In as l,ao as m,uo as n,co as o,lo as p,zr as q};
