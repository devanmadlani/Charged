import{a as Re,b as Ee,e as q,f as ae,g as Le,h as xe,i as Ue}from"./chunk-XLXZIIRO.js";import{a as ue,e as p}from"./chunk-CVT7ZQ5I.js";var fe=p(E=>{"use strict";var ce=E&&E.__awaiter||function(s,r,e,i){function o(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function c(a){try{n(i.next(a))}catch(f){u(f)}}function l(a){try{n(i.throw(a))}catch(f){u(f)}}function n(a){a.done?t(a.value):o(a.value).then(c,l)}n((i=i.apply(s,r||[])).next())})},le=E&&E.__generator||function(s,r){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,o,t,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(a){return l([n,a])}}function l(n){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(t=n[0]&2?o.return:n[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,n[1])).done)return t;switch(o=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(s,e)}catch(a){n=[6,a],o=0}finally{i=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(E,"__esModule",{value:!0});E.normaliseRecipeModuleConfig=void 0;function He(s){var r=this,e=s.preAPIHook;e===void 0&&(e=function(o){return ce(r,void 0,void 0,function(){return le(this,function(t){return[2,o]})})});var i=s.postAPIHook;return i===void 0&&(i=function(){return ce(r,void 0,void 0,function(){return le(this,function(o){return[2]})})}),{recipeId:s.recipeId,appInfo:s.appInfo,clientType:s.clientType,preAPIHook:e,postAPIHook:i}}E.normaliseRecipeModuleConfig=He});var V=p(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.normaliseAuthRecipe=void 0;var je=fe();function Ne(s){return(0,je.normaliseRecipeModuleConfig)(s)}M.normaliseAuthRecipe=Ne});var de=p(U=>{"use strict";var F=U&&U.__assign||function(){return F=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},F.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0});U.normaliseUserInput=void 0;var qe=V();function Fe(s){var r=F({functions:function(e){return e}},s.override);return F(F({},(0,qe.normaliseAuthRecipe)(s)),{override:r})}U.normaliseUserInput=Fe});var he=p(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.supported_fdi=H.package_version=void 0;H.package_version="0.15.0";H.supported_fdi=["3.1","4.0","4.1"]});var pe=p(G=>{"use strict";function ve(s){for(var r in s)G.hasOwnProperty(r)||(G[r]=s[r])}G.__esModule=!0;var D=Le();D.default!==void 0?ve(D):ve(ue({default:D},D))});var ge=p(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var We=pe();Z.default=We.STGeneralError});var $=p(S=>{"use strict";var g=S&&S.__assign||function(){return g=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},g.apply(this,arguments)},A=S&&S.__awaiter||function(s,r,e,i){function o(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function c(a){try{n(i.next(a))}catch(f){u(f)}}function l(a){try{n(i.throw(a))}catch(f){u(f)}}function n(a){a.done?t(a.value):o(a.value).then(c,l)}n((i=i.apply(s,r||[])).next())})},C=S&&S.__generator||function(s,r){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,o,t,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(a){return l([n,a])}}function l(n){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(t=n[0]&2?o.return:n[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,n[1])).done)return t;switch(o=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(s,e)}catch(a){n=[6,a],o=0}finally{i=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(S,"__esModule",{value:!0});var Me=Ee(),De=he(),Ge=ge(),Be=function(){function s(e,i){var o=this;this.recipeId=e,this.appInfo=i,this.get=function(t,u,c,l,n,a){return A(o,void 0,void 0,function(){var f,v;return C(this,function(P){switch(P.label){case 0:return[4,this.fetch(this.getFullUrl(t,u,l),g({method:"GET"},c),n,a)];case 1:return f=P.sent(),[4,this.getResponseJsonOrThrowGeneralError(f)];case 2:return v=P.sent(),[2,{jsonBody:v,fetchResponse:f}]}})})},this.post=function(t,u,c,l,n){return A(o,void 0,void 0,function(){var a,f;return C(this,function(v){switch(v.label){case 0:if(c.body===void 0)throw new Error("Post request must have a body");return[4,this.fetch(this.getFullUrl(t,u),g({method:"POST"},c),l,n)];case 1:return a=v.sent(),[4,this.getResponseJsonOrThrowGeneralError(a)];case 2:return f=v.sent(),[2,{jsonBody:f,fetchResponse:a}]}})})},this.delete=function(t,u,c,l,n){return A(o,void 0,void 0,function(){var a,f;return C(this,function(v){switch(v.label){case 0:return[4,this.fetch(this.getFullUrl(t,u),g({method:"DELETE"},c),l,n)];case 1:return a=v.sent(),[4,this.getResponseJsonOrThrowGeneralError(a)];case 2:return f=v.sent(),[2,{jsonBody:f,fetchResponse:a}]}})})},this.put=function(t,u,c,l,n){return A(o,void 0,void 0,function(){var a,f;return C(this,function(v){switch(v.label){case 0:return[4,this.fetch(this.getFullUrl(t,u),g({method:"PUT"},c),l,n)];case 1:return a=v.sent(),[4,this.getResponseJsonOrThrowGeneralError(a)];case 2:return f=v.sent(),[2,{jsonBody:f,fetchResponse:a}]}})})},this.fetch=function(t,u,c,l){return A(o,void 0,void 0,function(){var n,a,f,v,P,se;return C(this,function(N){switch(N.label){case 0:return u===void 0?n={}:n=u.headers,[4,this.callPreAPIHook({preAPIHook:c,url:t,requestInit:g(g({},u),{headers:g(g({},n),{"fdi-version":De.supported_fdi.join(","),"Content-Type":"application/json",rid:this.recipeId})})})];case 1:return a=N.sent(),f=a.requestInit,v=a.url,[4,fetch(v,f)];case 2:if(P=N.sent(),P.status>=300)throw P;return l===void 0?[3,4]:(se=P.clone(),[4,l({requestInit:f,url:t,fetchResponse:se})]);case 3:N.sent(),N.label=4;case 4:return[2,P]}})})},this.callPreAPIHook=function(t){return A(o,void 0,void 0,function(){var u;return C(this,function(c){switch(c.label){case 0:return t.preAPIHook===void 0?[2,{url:t.url,requestInit:t.requestInit}]:[4,t.preAPIHook({url:t.url,requestInit:t.requestInit})];case 1:return u=c.sent(),[2,u]}})})},this.getFullUrl=function(t,u,c){var l=o.appInfo.apiBasePath.getAsStringDangerous();t!==void 0&&t!=="public"&&(l="".concat(l,"/").concat(t));var n=new Me.default(u),a="".concat(o.appInfo.apiDomain.getAsStringDangerous()).concat(l).concat(n.getAsStringDangerous());return c===void 0?a:a+"?"+new URLSearchParams(c)},this.getResponseJsonOrThrowGeneralError=function(t){return A(o,void 0,void 0,function(){var u,c;return C(this,function(l){switch(l.label){case 0:return[4,t.clone().json()];case 1:if(u=l.sent(),u.status==="GENERAL_ERROR")throw c=u.message===void 0?"No Error Message Provided":u.message,new Ge.default(c);return[2,u]}})})}}var r;return r=s,s.preparePreAPIHook=function(e){var i=e.recipePreAPIHook,o=e.action,t=e.options,u=e.userContext;return function(c){return A(void 0,void 0,void 0,function(){var l;return C(r,function(n){switch(n.label){case 0:return[4,i(g(g({},c),{action:o,userContext:u}))];case 1:return l=n.sent(),t===void 0||t.preAPIHook===void 0?[2,l]:[2,t.preAPIHook({url:l.url,requestInit:l.requestInit,userContext:u})]}})})}},s.preparePostAPIHook=function(e){var i=e.recipePostAPIHook,o=e.action,t=e.userContext;return function(u){return A(void 0,void 0,void 0,function(){return C(r,function(c){switch(c.label){case 0:return[4,i(g(g({},u),{userContext:t,action:o}))];case 1:return c.sent(),[2]}})})}},s}();S.default=Be});var ye=p(b=>{"use strict";var Je=b&&b.__awaiter||function(s,r,e,i){function o(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function c(a){try{n(i.next(a))}catch(f){u(f)}}function l(a){try{n(i.throw(a))}catch(f){u(f)}}function n(a){a.done?t(a.value):o(a.value).then(c,l)}n((i=i.apply(s,r||[])).next())})},Ke=b&&b.__generator||function(s,r){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,o,t,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(a){return l([n,a])}}function l(n){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(t=n[0]&2?o.return:n[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,n[1])).done)return t;switch(o=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(s,e)}catch(a){n=[6,a],o=0}finally{i=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(b,"__esModule",{value:!0});b.getRecipeImplementation=void 0;var ee=$(),Qe=q();function Ie(s){var r=new ee.default(s.recipeId,s.appInfo);return{getTenantId:function(){var e=(0,Qe.getQueryParams)("tenantId");if((e==null?void 0:e.trim())!=="")return e},getLoginMethods:function(e){var i=e.tenantId,o=e.options,t=e.userContext;return Je(this,void 0,void 0,function(){var u,c,l,n,a;return Ke(this,function(f){switch(f.label){case 0:return u={},s.clientType!==void 0&&(u.clientType=s.clientType),[4,r.get(i,"/loginmethods",{},u,ee.default.preparePreAPIHook({recipePreAPIHook:s.preAPIHook,action:"GET_LOGIN_METHODS",options:o,userContext:t}),ee.default.preparePostAPIHook({recipePostAPIHook:s.postAPIHook,action:"GET_LOGIN_METHODS",userContext:t}))];case 1:return c=f.sent(),l=c.jsonBody,n=c.fetchResponse,l.firstFactors===void 0?(a=[],l.emailPassword.enabled&&a.push("emailpassword"),l.thirdParty.enabled&&a.push("thirdparty"),l.passwordless.enabled&&(a.push("otp-email"),a.push("otp-phone"),a.push("link-email"),a.push("link-phone"))):a=l.firstFactors,[2,{status:"OK",thirdParty:{providers:l.thirdParty.providers},firstFactors:a,fetchResponse:n}]}})})}}}b.default=Ie;b.getRecipeImplementation=Ie});var te=p(O=>{"use strict";var Ye=O&&O.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function i(){this.constructor=r}r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xe=O&&O.__awaiter||function(s,r,e,i){function o(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function c(a){try{n(i.next(a))}catch(f){u(f)}}function l(a){try{n(i.throw(a))}catch(f){u(f)}}function n(a){a.done?t(a.value):o(a.value).then(c,l)}n((i=i.apply(s,r||[])).next())})},ze=O&&O.__generator||function(s,r){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,o,t,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(a){return l([n,a])}}function l(n){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(t=n[0]&2?o.return:n[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,n[1])).done)return t;switch(o=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(s,e)}catch(a){n=[6,a],o=0}finally{i=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(O,"__esModule",{value:!0});var Ve=xe(),Ze=Ue(),$e=function(s){Ye(r,s);function r(e){var i=s.call(this,e)||this;return i.signOut=function(o){return Xe(i,void 0,void 0,function(){return ze(this,function(t){switch(t.label){case 0:return[4,Ze.default.getInstanceOrThrow().signOut({userContext:o.userContext})];case 1:return[2,t.sent()]}})})},i}return r}(Ve.default);O.default=$e});var ne=p(k=>{"use strict";var et=k&&k.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function i(){this.constructor=r}r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),B=k&&k.__assign||function(){return B=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},B.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0});k.Recipe=void 0;var tt=de(),nt=ae(),rt=ye(),me=q(),ot=te(),_e=function(s){et(r,s);function r(e){var i=s.call(this,(0,tt.normaliseUserInput)(e))||this,o=new nt.default((0,rt.default)({recipeId:i.config.recipeId,appInfo:i.config.appInfo,clientType:i.config.clientType,preAPIHook:i.config.preAPIHook,postAPIHook:i.config.postAPIHook}));return i.recipeImplementation=o.override(i.config.override.functions).build(),i}return r.init=function(e){return function(i,o){return r.instance=new r(B(B({},e),{recipeId:r.RECIPE_ID,appInfo:i,clientType:o})),r.instance}},r.getInstanceOrThrow=function(){if(r.instance===void 0){var e="No instance of Multitenancy found. Ensure that 'SuperTokens.init' method has been called.";throw e=(0,me.checkForSSRErrorAndAppendIfNeeded)(e),Error(e)}return r.instance},r.reset=function(){(0,me.isTest)()&&(r.instance=void 0)},r.RECIPE_ID="multitenancy",r}(ot.default);k.Recipe=_e;k.default=_e});var we=p(j=>{"use strict";var W=j&&j.__assign||function(){return W=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},W.apply(this,arguments)};Object.defineProperty(j,"__esModule",{value:!0});j.normaliseUserInput=void 0;var it=V();function st(s){var r=W({functions:function(e){return e}},s.override);return W(W({},(0,it.normaliseAuthRecipe)(s)),{override:r})}j.normaliseUserInput=st});var Pe=p(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.PASSWORDLESS_LOGIN_ATTEMPT_INFO_STORAGE_KEY=void 0;J.PASSWORDLESS_LOGIN_ATTEMPT_INFO_STORAGE_KEY="supertokens-passwordless-loginAttemptInfo"});var Ce=p(w=>{"use strict";var T=w&&w.__assign||function(){return T=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},T.apply(this,arguments)},L=w&&w.__awaiter||function(s,r,e,i){function o(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function c(a){try{n(i.next(a))}catch(f){u(f)}}function l(a){try{n(i.throw(a))}catch(f){u(f)}}function n(a){a.done?t(a.value):o(a.value).then(c,l)}n((i=i.apply(s,r||[])).next())})},x=w&&w.__generator||function(s,r){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,o,t,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(a){return l([n,a])}}function l(n){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(t=n[0]&2?o.return:n[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,n[1])).done)return t;switch(o=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(s,e)}catch(a){n=[6,a],o=0}finally{i=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(w,"__esModule",{value:!0});w.getRecipeImplementation=void 0;var re=Re(),_=$(),K=q(),oe=ne(),ie=Pe();function Ae(s){var r=new _.default(s.recipeId,s.appInfo);return{createCode:function(e){return L(this,void 0,void 0,function(){var i,o,t,u,c,l;return x(this,function(n){switch(n.label){case 0:return"email"in e&&(i={email:e.email,shouldTryLinkingWithSessionUser:e.shouldTryLinkingWithSessionUser}),"phoneNumber"in e&&(i={phoneNumber:e.phoneNumber,shouldTryLinkingWithSessionUser:e.shouldTryLinkingWithSessionUser}),l=(c=r).post,[4,oe.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:e.userContext})];case 1:return[4,l.apply(c,[n.sent(),"/signinup/code",{body:JSON.stringify(i)},_.default.preparePreAPIHook({recipePreAPIHook:s.preAPIHook,action:"PASSWORDLESS_CREATE_CODE",userContext:e.userContext,options:e.options}),_.default.preparePostAPIHook({recipePostAPIHook:s.postAPIHook,action:"PASSWORDLESS_CREATE_CODE",userContext:e.userContext})])];case 2:return o=n.sent(),t=o.jsonBody,u=o.fetchResponse,[2,T(T({},t),{fetchResponse:u})]}})})},resendCode:function(e){return L(this,void 0,void 0,function(){var i,o,t,u;return x(this,function(c){switch(c.label){case 0:return i={deviceId:e.deviceId,preAuthSessionId:e.preAuthSessionId,shouldTryLinkingWithSessionUser:e.shouldTryLinkingWithSessionUser},[4,r.post(e.tenantId,"/signinup/code/resend",{body:JSON.stringify(i)},_.default.preparePreAPIHook({recipePreAPIHook:s.preAPIHook,action:"PASSWORDLESS_RESEND_CODE",userContext:e.userContext,options:e.options}),_.default.preparePostAPIHook({recipePostAPIHook:s.postAPIHook,action:"PASSWORDLESS_RESEND_CODE",userContext:e.userContext}))];case 1:return o=c.sent(),t=o.jsonBody,u=o.fetchResponse,[2,{status:t.status,fetchResponse:u}]}})})},consumeCode:function(e){return L(this,void 0,void 0,function(){var i,o,t,u;return x(this,function(c){switch(c.label){case 0:return"userInputCode"in e?i={userInputCode:e.userInputCode,deviceId:e.deviceId,preAuthSessionId:e.preAuthSessionId,shouldTryLinkingWithSessionUser:e.shouldTryLinkingWithSessionUser}:i={linkCode:e.linkCode,preAuthSessionId:e.preAuthSessionId,shouldTryLinkingWithSessionUser:e.shouldTryLinkingWithSessionUser},[4,r.post(e.tenantId,"/signinup/code/consume",{body:JSON.stringify(i)},_.default.preparePreAPIHook({recipePreAPIHook:s.preAPIHook,action:"PASSWORDLESS_CONSUME_CODE",userContext:e.userContext,options:e.options}),_.default.preparePostAPIHook({recipePostAPIHook:s.postAPIHook,action:"PASSWORDLESS_CONSUME_CODE",userContext:e.userContext}))];case 1:return o=c.sent(),t=o.jsonBody,u=o.fetchResponse,t.status!=="OK"?[2,T(T({},t),{fetchResponse:u})]:[2,T(T({status:"OK"},(0,K.normaliseUserResponse)("passwordless",t)),{fetchResponse:u})]}})})},getTenantIdFromURL:function(){return(0,K.getQueryParams)("tenantId")},getLinkCodeFromURL:function(){return(0,K.getHashFromLocation)()},getPreAuthSessionIdFromURL:function(){var e=(0,K.getQueryParams)("preAuthSessionId");return e===void 0?"":e},doesEmailExist:function(e){return L(this,void 0,void 0,function(){var i,o,t,u,c;return x(this,function(l){switch(l.label){case 0:return c=(u=r).get,[4,oe.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:e.userContext})];case 1:return[4,c.apply(u,[l.sent(),"/passwordless/email/exists",{},{email:e.email},_.default.preparePreAPIHook({recipePreAPIHook:s.preAPIHook,action:"EMAIL_EXISTS",userContext:e.userContext,options:e.options}),_.default.preparePostAPIHook({recipePostAPIHook:s.postAPIHook,action:"EMAIL_EXISTS",userContext:e.userContext})])];case 2:return i=l.sent(),o=i.jsonBody,t=i.fetchResponse,[2,{status:o.status,doesExist:o.exists,fetchResponse:t}]}})})},doesPhoneNumberExist:function(e){return L(this,void 0,void 0,function(){var i,o,t,u,c;return x(this,function(l){switch(l.label){case 0:return c=(u=r).get,[4,oe.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:e.userContext})];case 1:return[4,c.apply(u,[l.sent(),"/passwordless/phonenumber/exists",{},{phoneNumber:e.phoneNumber},_.default.preparePreAPIHook({recipePreAPIHook:s.preAPIHook,action:"PHONE_NUMBER_EXISTS",userContext:e.userContext,options:e.options}),_.default.preparePostAPIHook({recipePostAPIHook:s.postAPIHook,action:"PHONE_NUMBER_EXISTS",userContext:e.userContext})])];case 2:return i=l.sent(),o=i.jsonBody,t=i.fetchResponse,[2,{status:o.status,doesExist:o.exists,fetchResponse:t}]}})})},getLoginAttemptInfo:function(){return L(this,void 0,void 0,function(){var e;return x(this,function(i){switch(i.label){case 0:return[4,re.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.getItem(ie.PASSWORDLESS_LOGIN_ATTEMPT_INFO_STORAGE_KEY)];case 1:if(e=i.sent(),e===null)return[2,void 0];try{return[2,JSON.parse(e)]}catch{return[2,void 0]}return[2]}})})},setLoginAttemptInfo:function(e){return L(this,void 0,void 0,function(){return x(this,function(i){switch(i.label){case 0:return[4,re.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.setItem(ie.PASSWORDLESS_LOGIN_ATTEMPT_INFO_STORAGE_KEY,JSON.stringify(T({version:1},e.attemptInfo)))];case 1:return i.sent(),[2]}})})},clearLoginAttemptInfo:function(){return L(this,void 0,void 0,function(){return x(this,function(e){return re.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.removeItem(ie.PASSWORDLESS_LOGIN_ATTEMPT_INFO_STORAGE_KEY),[2]})})}}}w.default=Ae;w.getRecipeImplementation=Ae});var Oe=p(R=>{"use strict";var ut=R&&R.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function i(){this.constructor=r}r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Q=R&&R.__assign||function(){return Q=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},Q.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0});R.Recipe=void 0;var at=ae(),Se=q(),ct=te(),lt=we(),ft=Ce(),be=function(s){ut(r,s);function r(e){var i=s.call(this,(0,lt.normaliseUserInput)(e))||this,o=new at.default((0,ft.default)({recipeId:i.config.recipeId,appInfo:i.config.appInfo,clientType:i.config.clientType,preAPIHook:i.config.preAPIHook,postAPIHook:i.config.postAPIHook}));return i.recipeImplementation=o.override(i.config.override.functions).build(),i}return r.init=function(e){return function(i,o){return r.instance=new r(Q(Q({},e),{recipeId:r.RECIPE_ID,appInfo:i,clientType:o})),r.instance}},r.getInstanceOrThrow=function(){if(r.instance===void 0){var e="No instance of Passwordless found. Ensure that the 'Passwordless.init' method is called within the 'SuperTokens.init' recipeList.";throw e=(0,Se.checkForSSRErrorAndAppendIfNeeded)(e),Error(e)}return r.instance},r.reset=function(){(0,Se.isTest)()&&(r.instance=void 0)},r.RECIPE_ID="passwordless",r}(ct.default);R.Recipe=be;R.default=be});var Te=p(d=>{"use strict";var h=d&&d.__assign||function(){return h=Object.assign||function(s){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},h.apply(this,arguments)},Y=d&&d.__awaiter||function(s,r,e,i){function o(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function c(a){try{n(i.next(a))}catch(f){u(f)}}function l(a){try{n(i.throw(a))}catch(f){u(f)}}function n(a){a.done?t(a.value):o(a.value).then(c,l)}n((i=i.apply(s,r||[])).next())})},X=d&&d.__generator||function(s,r){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,o,t,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(a){return l([n,a])}}function l(n){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(t=n[0]&2?o.return:n[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,n[1])).done)return t;switch(o=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(s,e)}catch(a){n=[6,a],o=0}finally{i=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(d,"__esModule",{value:!0});d.clearLoginAttemptInfo=d.setLoginAttemptInfo=d.getLoginAttemptInfo=d.getTenantIdFromURL=d.getPreAuthSessionIdFromURL=d.getLinkCodeFromURL=d.signOut=d.doesPhoneNumberExist=d.doesEmailExist=d.consumeCode=d.resendCode=d.createCode=d.init=void 0;var m=q(),ke=ne(),y=Oe(),I=function(){function s(){}return s.init=function(r){return y.default.init(r)},s.createCode=function(r){var e,i;return Y(this,void 0,void 0,function(){var o,t,u,c,l;return X(this,function(n){switch(n.label){case 0:return o=y.default.getInstanceOrThrow(),t=o.recipeImplementation,u=(0,m.getNormalisedUserContext)(r.userContext),[4,ke.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:r.userContext})];case 1:return c=n.sent(),[4,t.createCode(h(h({},r),{shouldTryLinkingWithSessionUser:(e=r.shouldTryLinkingWithSessionUser)!==null&&e!==void 0?e:!1,userContext:u}))];case 2:return l=n.sent(),l.status!=="OK"?[3,4]:[4,t.setLoginAttemptInfo({attemptInfo:{tenantId:c,deviceId:l.deviceId,preAuthSessionId:l.preAuthSessionId,shouldTryLinkingWithSessionUser:(i=r.shouldTryLinkingWithSessionUser)!==null&&i!==void 0?i:!1,flowType:l.flowType},userContext:u})];case 3:n.sent(),n.label=4;case 4:return[2,l]}})})},s.resendCode=function(r){return Y(this,void 0,void 0,function(){var e,i,o,t;return X(this,function(u){switch(u.label){case 0:return e=y.default.getInstanceOrThrow(),i=e.recipeImplementation,o=(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext),[4,i.getLoginAttemptInfo({userContext:o})];case 1:return t=u.sent(),[2,i.resendCode(h(h({},r),{tenantId:t==null?void 0:t.tenantId,userContext:o,deviceId:t===void 0?"":t.deviceId,preAuthSessionId:t===void 0?"":t.preAuthSessionId,shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser}))]}})})},s.consumeCode=function(r){var e;return Y(this,void 0,void 0,function(){var i,o,t,u,c,l,l,n,a,f;return X(this,function(v){switch(v.label){case 0:return i=y.default.getInstanceOrThrow(),o=i.recipeImplementation,t=(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext),r!==void 0&&"userInputCode"in r?[4,o.getLoginAttemptInfo({userContext:t})]:[3,2];case 1:return c=v.sent(),l=(e=c==null?void 0:c.shouldTryLinkingWithSessionUser)!==null&&e!==void 0?e:!1,u={userInputCode:r.userInputCode,deviceId:c===void 0?"":c.deviceId,preAuthSessionId:c===void 0?"":c.preAuthSessionId,shouldTryLinkingWithSessionUser:l,tenantId:c==null?void 0:c.tenantId},[3,3];case 2:l=!1,n=o.getLinkCodeFromURL({userContext:t}),a=o.getTenantIdFromURL({userContext:t}),f=o.getPreAuthSessionIdFromURL({userContext:t}),u={tenantId:a,linkCode:n,preAuthSessionId:f,shouldTryLinkingWithSessionUser:l},v.label=3;case 3:return[2,o.consumeCode(h({userContext:t,options:r==null?void 0:r.options},u))]}})})},s.getLinkCodeFromURL=function(r){return y.default.getInstanceOrThrow().recipeImplementation.getLinkCodeFromURL(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext)}))},s.getPreAuthSessionIdFromURL=function(r){return y.default.getInstanceOrThrow().recipeImplementation.getPreAuthSessionIdFromURL(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext)}))},s.getTenantIdFromURL=function(r){return y.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext)}))},s.doesEmailExist=function(r){return y.default.getInstanceOrThrow().recipeImplementation.doesEmailExist(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r.userContext)}))},s.doesPhoneNumberExist=function(r){return y.default.getInstanceOrThrow().recipeImplementation.doesPhoneNumberExist(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r.userContext)}))},s.getLoginAttemptInfo=function(r){return y.default.getInstanceOrThrow().recipeImplementation.getLoginAttemptInfo(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext)}))},s.setLoginAttemptInfo=function(r){return Y(this,void 0,void 0,function(){var e,i,o;return X(this,function(t){switch(t.label){case 0:return e=(0,m.getNormalisedUserContext)(r.userContext),i=y.default.getInstanceOrThrow(),[4,ke.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:e})];case 1:return o=t.sent(),[2,i.recipeImplementation.setLoginAttemptInfo({attemptInfo:h({tenantId:o,shouldTryLinkingWithSessionUser:r.attemptInfo.shouldTryLinkingWithSessionUser},r.attemptInfo),userContext:e})]}})})},s.clearLoginAttemptInfo=function(r){return y.default.getInstanceOrThrow().recipeImplementation.clearLoginAttemptInfo(h(h({},r),{userContext:(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext)}))},s.signOut=function(r){return y.default.getInstanceOrThrow().signOut({userContext:(0,m.getNormalisedUserContext)(r==null?void 0:r.userContext)})},s}();d.default=I;var dt=I.init;d.init=dt;var ht=I.createCode;d.createCode=ht;var vt=I.resendCode;d.resendCode=vt;var pt=I.consumeCode;d.consumeCode=pt;var gt=I.doesEmailExist;d.doesEmailExist=gt;var It=I.doesPhoneNumberExist;d.doesPhoneNumberExist=It;var yt=I.signOut;d.signOut=yt;var mt=I.getLinkCodeFromURL;d.getLinkCodeFromURL=mt;var _t=I.getPreAuthSessionIdFromURL;d.getPreAuthSessionIdFromURL=_t;var wt=I.getTenantIdFromURL;d.getTenantIdFromURL=wt;var Pt=I.getLoginAttemptInfo;d.getLoginAttemptInfo=Pt;var At=I.setLoginAttemptInfo;d.setLoginAttemptInfo=At;var Ct=I.clearLoginAttemptInfo;d.clearLoginAttemptInfo=Ct});var bt=p(z=>{"use strict";function St(s){for(var r in s)z.hasOwnProperty(r)||(z[r]=s[r])}z.__esModule=!0;St(Te())});export{ne as a,bt as b};
